<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1">
  <title>CyborX</title>

  <link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>

  <style>
    html, body { height: 100%; font-family: 'Inter', system-ui, -apple-system, Segoe UI, Roboto, 'Helvetica Neue', Arial; }
    body { overflow: hidden; }

    .glass { backdrop-filter: blur(10px); background: rgba(255,255,255,0.04); }
    .card  { border-radius: 1rem; padding: 1rem; box-shadow: 0 10px 25px rgba(0,0,0,.25); border: 1px solid rgba(255,255,255,.08); }

    .mainGrid { height: 100vh; }
    .scrollCenter { height: 100vh; overflow-y: auto; -webkit-overflow-scrolling: touch; }

    /* Hide scrollbars globally but keep scrolling */
    .no-scrollbar { overflow-y: auto; -webkit-overflow-scrolling: touch; -ms-overflow-style: none; scrollbar-width: none; }
    .no-scrollbar::-webkit-scrollbar { width: 0 !important; height: 0 !important; display: none !important; background: transparent !important; }
    .no-scrollbar::-webkit-scrollbar-thumb { background: transparent !important; }

    /* Right panel / modal lists explicit */
    #rightTopList, #rightOnlineList, #topModalList, #onlineModalList {
      overflow-y: auto; -webkit-overflow-scrolling: touch; scrollbar-width: none; -ms-overflow-style: none;
    }
    #rightTopList::-webkit-scrollbar,
    #rightOnlineList::-webkit-scrollbar,
    #topModalList::-webkit-scrollbar,
    #onlineModalList::-webkit-scrollbar { width:0!important; height:0!important; background:transparent!important; display:none!important; }

    /* Outer cards never show their own scrollbar */
    #cardTopUsers, #cardOnlineUsers {
      overflow: hidden; -ms-overflow-style:none; scrollbar-width:none;
    }
    #cardTopUsers::-webkit-scrollbar, #cardOnlineUsers::-webkit-scrollbar { width:0!important;height:0!important;display:none!important;background:transparent!important; }

    /* Mobile dock (fixed bottom) */
    .mobile-dock {
      position: fixed; left: 0; right: 0; bottom: 0; z-index: 50;
      padding: 10px 14px calc(10px + env(safe-area-inset-bottom));
      background: rgba(15, 23, 42, .82);
      backdrop-filter: blur(18px) saturate(140%);
      border-top: 1px solid rgba(255,255,255,.08);
      box-shadow: 0 -8px 24px rgba(0,0,0,.35);
    }
    .dock-btn { flex: 1 1 0; display: flex; flex-direction: column; align-items: center; gap: 6px; padding: 8px 6px; border-radius: 14px; color: #cbd5e1; }
    .dock-btn:hover { background: rgba(255,255,255,.06); }
    .dock-icon { width: 22px; height: 22px; opacity: .95; }

    /* Pro user tile (gradient border) */
    .user-tile {
      position: relative; border-radius: 12px; padding: 10px;
      background: linear-gradient(#0b1220, #0b1220) padding-box,
                  linear-gradient(135deg, #6d28d9, #06b6d4) border-box;
      border: 1px solid transparent;
    }

    /* Mobile slide menu */
    #mSide { transform: translateX(-100%); transition: transform .28s ease; }
    #mSide.open { transform: translateX(0%); }
    #mOverlay { opacity: 0; transition: opacity .2s ease; }
    #mOverlay.show { opacity: .55; }

    /* --- Global Statistics styles --- */
    .gs-panel{
      border-radius:16px; padding:16px 16px 18px;
      background: radial-gradient(1200px 600px at -20% -40%, rgba(59,130,246,.10), transparent 60%),
                  radial-gradient(1200px 600px at 120% -40%, rgba(16,185,129,.10), transparent 60%),
                  rgba(255,255,255,.03);
      border:1px solid rgba(255,255,255,.10);
      box-shadow: 0 12px 24px rgba(0,0,0,.25);
    }
    .gs-head{display:flex;align-items:center;gap:10px;margin-bottom:14px}
    .gs-chip{width:34px;height:34px;border-radius:10px;display:flex;align-items:center;justify-content:center;
      background:rgba(59,130,246,.15);border:1px solid rgba(59,130,246,.25)}
    .gs-title{font-weight:600;color:#e5e7eb}
    .gs-sub{font-size:12px;color:#9aa4b2;margin-top:2px}
    .gs-grid{display:grid;gap:16px}
    @media (min-width:640px){.gs-grid{grid-template-columns:repeat(2,minmax(0,1fr))}}
    @media (min-width:1280px){.gs-grid{grid-template-columns:repeat(4,minmax(0,1fr))}}

    .gs-card{
      position:relative;border-radius:14px;padding:18px 16px;
      border:1px solid rgba(255,255,255,.08);
      box-shadow: 0 10px 20px rgba(0,0,0,.24);
      color:#e6e9ee;
    }
    .gs-card .gs-icon{
      width:36px;height:36px;border-radius:10px;display:flex;align-items:center;justify-content:center;
      margin-bottom:10px;border:1px solid rgba(255,255,255,.18)
    }
    .gs-card .gs-icon svg{width:18px;height:18px;display:block;opacity:.95}
    .gs-num{font-weight:800;font-size:28px;line-height:1}
    .gs-label{font-size:12px;color:#cbd5e1;margin-top:6px}
    .gs-blue   { background:linear-gradient(135deg, rgba(30,58,138,.7), rgba(30,41,59,.65)); }
    .gs-green  { background:linear-gradient(135deg, rgba(6,95,70,.75), rgba(15,118,110,.65)); }
    .gs-red    { background:linear-gradient(135deg, rgba(88,28,28,.78), rgba(124,45,18,.65)); }
    .gs-purple { background:linear-gradient(135deg, rgba(76,29,149,.75), rgba(88,28,135,.65)); }
    
    /* ===== HARD GLOBAL SCROLLBAR HIDE (Chrome/Edge/Firefox/IE compatible) ===== */
    html, body, .scrollCenter,
    #rightTopList, #rightOnlineList, #topModalList, #onlineModalList,
    aside, .no-scrollbar {
      -ms-overflow-style: none;   /* IE/Edge */
      scrollbar-width: none;      /* Firefox */
    }
    
    html::-webkit-scrollbar,
    body::-webkit-scrollbar,
    .scrollCenter::-webkit-scrollbar,
    #rightTopList::-webkit-scrollbar,
    #rightOnlineList::-webkit-scrollbar,
    #topModalList::-webkit-scrollbar,
    #onlineModalList::-webkit-scrollbar,
    aside::-webkit-scrollbar,
    .no-scrollbar::-webkit-scrollbar{
      width: 0 !important;
      height: 0 !important;
      display: none !important;
      background: transparent !important;
    }
    
    .no-scrollbar { overflow-y: auto; -webkit-overflow-scrolling: touch; }
    /* ===== END ===== */
    
  </style>
</head>
<body class="bg-slate-950 text-slate-100">

<!-- MOBILE DOCK -->
<nav class="mobile-dock lg:hidden">
  <div class="flex items-center gap-2">
    <button id="dockMenu" class="dock-btn" aria-label="Menu">
      <svg class="dock-icon" viewBox="0 0 24 24" fill="currentColor"><path d="M3 6h18v2H3zM3 11h18v2H3zM3 16h18v2H3z"/></svg>
    </button>
    <button id="dockTop" class="dock-btn" aria-label="Top Users">
      <svg class="dock-icon" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2l3 6 6 .9-4.5 4.2 1.1 6.1L12 16.8 6.4 19.2 7.5 13.1 3 8.9l6-.9z"/></svg>
    </button>
    <button id="dockOnline" class="dock-btn" aria-label="Online Users">
      <svg class="dock-icon" viewBox="0 0 24 24" fill="currentColor"><path d="M9 12c2.21 0 4-1.79 4-4S11.21 4 9 4 5 5.79 5 8s1.79 4 4 4zm8 0c1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3 1.34 3 3 3zM9 14c-2.67 0-8 1.34-8 4v2h10.09A7 7 0 009 14zm8 0c-1.3 0-2.53.2-3.6.56A6.97 6.97 0 0119 20h5v-2c0-2.66-5.33-4-8-4z"/></svg>
    </button>
  </div>
</nav>

<!-- MOBILE OVERLAY (for sidebar) -->
<div id="mOverlay" class="fixed inset-0 bg-black hidden z-40"></div>

<div class="mainGrid grid grid-cols-1 lg:grid-cols-[260px_1fr_360px]">

  <!-- LEFT sidebar (desktop) -->
  <aside class="hidden lg:flex flex-col border-r border-white/10 bg-slate-900/60 sticky top-0 h-screen">
        <a href="/app/settings" class="p-4 flex items-center gap-3 hover:bg-white/5 transition">
      <img src="https://t.me/i/userpic/320/v5J5eqA-nM7jAMBoAxTNpZKHZJXIjnY3BP82fW4Mi6aXtHKZGrFVhFmyYaT5mkkK.jpg" class="w-10 h-10 rounded-xl object-cover" alt=""
           onerror="this.onerror=null;this.src='https://api.dicebear.com/7.x/identicon/svg?seed=MD_TECH_HACKER'">
      <div class="flex-1 min-w-0">
        <div class="flex items-center gap-2">
          <div class="font-semibold truncate max-w-[130px]">„Äé‚õ• ùó†ùóó ùóßùóòùóñùóõ ùóõùóîùóñùóûùóòùó• ‚õ•„Äè</div>
          <span class="inline-flex items-center rounded-md px-2 py-[2px] text-[10px] font-semibold bg-slate-500/20 text-slate-300">FREE</span>        </div>
        <div class="text-xs text-slate-400 truncate">@MD_TECH_HACKER</div>
      </div>
      <span class="text-[11px] px-2 py-1 rounded-md bg-white/10 text-slate-300">View</span>
    </a>

    <nav class="px-2 text-sm space-y-1">
      <a class="flex items-center gap-3 px-3 py-2 rounded-xl hover:bg-white/5 bg-white/5" href="/app/dashboard"><svg class="w-4 h-4 opacity-80" viewBox="0 0 24 24" fill="currentColor"><path d="M12 3l9 8h-3v9H6v-9H3l9-8z"/></svg><span>Dashboard</span></a>
      <a class="flex items-center gap-3 px-3 py-2 rounded-xl hover:bg-amber-500/10 text-amber-300 " href="/app/deposit"><svg class="w-4 h-4 text-amber-300" viewBox="0 0 24 24" fill="currentColor"><path d="M3 7l4 4 5-8 5 8 4-4v10H3V7z"/></svg><span class="font-medium">Deposit XCoin</span></a>
      <a class="flex items-center gap-3 px-3 py-2 rounded-xl hover:bg-amber-500/10 text-amber-300 " href="/app/buy"><svg class="w-4 h-4 text-amber-300" viewBox="0 0 24 24" fill="currentColor"><path d="M3 7l4 4 5-8 5 8 4-4v10H3V7z"/></svg><span class="font-medium">Buy Premium</span></a>
      <a class="flex items-center gap-3 px-3 py-2 rounded-xl hover:bg-white/5 " href="/app/redeem"><svg class="w-4 h-4 opacity-80" viewBox="0 0 24 24" fill="currentColor"><path d="M20 6H4a2 2 0 00-2 2v3h20V8a2 2 0 00-2-2zM2 21a2 2 0 002 2h16a2 2 0 002-2v-8H2v8z"/></svg><span>Redeem</span></a>
      <a class="flex items-center gap-3 px-3 py-2 rounded-xl hover:bg-white/5 " href="/app/checkers"><svg class="w-4 h-4 opacity-80" viewBox="0 0 24 24" fill="currentColor"><path d="M9 16.2l-3.5-3.5L4 14.2l5 5 11-11-1.5-1.5z"/></svg><span>Checkers</span></a>
      <a class="flex items-center gap-3 px-3 py-2 rounded-xl hover:bg-white/5 " href="/app/autohitters"><svg class="w-4 h-4 opacity-80" viewBox="0 0 24 24" fill="currentColor"><path d="M9 16.2l-3.5-3.5L4 14.2l5 5 11-11-1.5-1.5z"/></svg><span>Auto Hitters</span></a>
      <a class="flex items-center gap-3 px-3 py-2 rounded-xl hover:bg-white/5 " href="/app/killers"><svg class="w-4 h-4 opacity-80" viewBox="0 0 24 24" fill="currentColor"><path d="M14.7 6.3l3 3L9 18H6v-3l8.7-8.7zM17 2l5 5-2 2-5-5 2-2z"/></svg><span>CC Killer</span></a>
      <a class="flex items-center gap-3 px-3 py-2 rounded-xl hover:bg-white/5 " href="/app/settings"><svg class="w-4 h-4 opacity-80" viewBox="0 0 24 24" fill="currentColor"><path d="M19.14 12.94a8 8 0 000-1.88l2.03-1.58-1.92-3.32-2.39.96a8.06 8.06 0 00-1.63-.94L14.5 2h-5l-.7 2.18c-.57.23-1.12.53-1.63.94l-2.39-.96L2.86 7.5l2.03 1.58a8.6 8.6 0 000 1.84L2.86 12.5l1.92 3.32 2.39-.96c.5.4 1.05.71 1.63.94L9.5 22h5l.7-2.18c.57-.23 1.12-.53 1.63-.94l2.39.96 1.92-3.32-2.03-1.58z"/></svg><span>Settings</span></a>
          </nav>

    <div class="mt-auto p-4">
      <a href="/logout.php" class="w-full inline-flex items-center justify-center rounded-xl bg-rose-500/15 text-rose-300 px-3 py-2 hover:bg-rose-500/20">
        <svg class="w-4 h-4 mr-2" viewBox="0 0 24 24" fill="currentColor"><path d="M16 13v-2H7V8l-5 4 5 4v-3h9zM20 3h-8v2h8v14h-8v2h8a2 2 0 002-2V5a2 2 0 00-2-2z"/></svg>Logout
      </a>
    </div>
  </aside>

  <!-- MOBILE SIDEBAR (all pages) -->
  <aside id="mSide" class="lg:hidden fixed inset-y-0 left-0 w-72 z-50 bg-slate-900/95 border-r border-white/10 p-4 no-scrollbar">
    <a href="/app/settings" class="flex items-center gap-3 mb-4">
      <img src="https://t.me/i/userpic/320/v5J5eqA-nM7jAMBoAxTNpZKHZJXIjnY3BP82fW4Mi6aXtHKZGrFVhFmyYaT5mkkK.jpg" class="w-9 h-9 rounded-lg object-cover" alt=""
           onerror="this.onerror=null;this.src='https://api.dicebear.com/7.x/identicon/svg?seed=MD_TECH_HACKER'">
      <div class="min-w-0">
        <div class="font-semibold truncate max-w-[130px]">„Äé‚õ• ùó†ùóó ùóßùóòùóñùóõ ùóõùóîùóñùóûùóòùó• ‚õ•„Äè</div>
        <div class="text-xs text-slate-400 truncate">@MD_TECH_HACKER</div>
      </div>
      <span class="inline-flex items-center rounded-md px-2 py-[2px] text-[10px] font-semibold bg-slate-500/20 text-slate-300">FREE</span>    </a>
    <nav class="px-1 text-sm space-y-1">
      <a class="block px-3 py-2 rounded-xl hover:bg-white/5 bg-white/5" href="/app/dashboard">Dashboard</a>
      <a class="block px-3 py-2 rounded-xl hover:bg-white/5 " href="/app/deposit">Deposit XCoin</a>
      <a class="block px-3 py-2 rounded-xl hover:bg-white/5 " href="/app/buy">Buy Premium</a>
      <a class="block px-3 py-2 rounded-xl hover:bg-white/5 " href="/app/redeem">Redeem</a>
      <a class="block px-3 py-2 rounded-xl hover:bg-white/5 " href="/app/checkers">Checkers</a>
      <a class="block px-3 py-2 rounded-xl hover:bg-white/5 " href="/app/autohitters">Auto Hitters</a>
      <a class="block px-3 py-2 rounded-xl hover:bg-white/5 " href="/app/killers">CC Killers</a>
      <a class="block px-3 py-2 rounded-xl hover:bg-white/5 " href="/app/settings">Settings</a>
            <div class="pt-6">
        <a href="/logout.php" class="w-full inline-flex items-center justify-center rounded-xl bg-rose-500/15 text-rose-300 px-3 py-2 hover:bg-rose-500/20">Logout</a>
      </div>
    </nav>
  </aside>

  <!-- CENTER -->
  <main class="scrollCenter">
    <!-- Header (fixed) -->
    <header class="sticky top-0 z-10 bg-slate-950/80 backdrop-blur border-b border-white/10">
      <div class="px-4 lg:px-6 py-3 flex items-center justify-between">
        <div class="flex items-center gap-3">
          <div class="w-9 h-9 rounded-xl bg-gradient-to-tr from-blue-500 to-emerald-400 flex items-center justify-center shadow">
            <svg class="w-5 h-5 text-white" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2a10 10 0 100 20 10 10 0 000-20zM7.5 12l2.5 2.5L16.5 8l1.5 1.5-8 8L6 13.5 7.5 12z"/></svg>
          </div>
          <div class="font-semibold">CyborX</div>
        </div>

        <!-- live clock (kept) -->
        <div class="inline-flex items-center gap-2 rounded-full bg-white/10 px-3 py-1.5 text-xs text-slate-200 font-mono">
          <svg class="w-4 h-4 opacity-80" viewBox="0 0 24 24" fill="currentColor"><path d="M12 20a8 8 0 1 1 0-16 8 8 0 0 1 0 16zm.5-12h-1v5l4 2 .5-.9-3.5-1.8V8z"/></svg>
          <span id="liveClock">--:--:--</span>
        </div>
      </div>

          </header>

    <!-- CENTER CONTENT -->
    <section class="p-4 lg:p-6 space-y-6 pb-28 lg:pb-6">
      <style>
  .tab-btn{--tw-ring-color:transparent}
  .tab-btn[aria-selected="true"]{background:rgba(255,255,255,.12);border-color:rgba(255,255,255,.18)}
</style>
<div class="space-y-6">
  <!-- Hero / Balances -->
  <div class="rounded-2xl border border-white/10 bg-gradient-to-r from-indigo-500/10 via-violet-500/10 to-fuchsia-500/10 p-5 md:p-6 shadow-2xl">
    <div class="flex items-start justify-between gap-4 flex-wrap">
      <div>
        <div class="inline-flex items-center gap-2 rounded-lg bg-white/10 px-3 py-1 text-xs text-slate-300">
          <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2a10 10 0 100 20 10 10 0 000-20zM7.5 12l2.5 2.5L16.5 8l1.5 1.5-8 8L6 13.5 7.5 12z"/></svg>
          Upgrade & top-up using XCoin
        </div>
        <h2 class="mt-2 text-xl md:text-2xl font-semibold">Buy Center</h2>
        <p class="mt-1 text-sm text-slate-400">Use your <strong>XCoin</strong> to upgrade plan or convert into credits or kcoin.</p>
      </div>
      <div class="flex flex-col items-end gap-2 w-full sm:w-auto">
        <div class="grid grid-cols-3 gap-2">
          <div class="rounded-xl bg-white/10 px-3 py-2 text-xs text-center">
            <div class="text-slate-300">Credits</div>
            <div id="buyCredits" class="text-base font-semibold">50</div>
          </div>
          <div class="rounded-xl bg-white/10 px-3 py-2 text-xs text-center">
            <div class="text-slate-300">Killer Credits (kcoin)</div>
            <div id="buyKcoin" class="text-base font-semibold">0</div>
          </div>
          <div class="rounded-xl bg-white/10 px-3 py-2 text-xs text-center">
            <div class="text-slate-300">Your XCoin</div>
            <div id="buyXcoin" class="text-base font-semibold">$0</div>
          </div>
        </div>
        <a href="/app/deposit" class="self-end rounded-lg bg-emerald-600/90 hover:bg-emerald-600 px-3 py-1.5 text-xs font-semibold">Deposit XCoin</a>
      </div>
    </div>
  </div>
  <!-- Desktop Success / Error banner (mobile-‡¶è modal ‡¶¶‡ßá‡¶ñ‡¶æ‡¶¨) -->
  <div id="buyMsg" class="hidden rounded-2xl border px-4 py-3 text-sm"></div>
  <!-- Tabs -->
  <div class="rounded-2xl border border-white/10 bg-white/5 p-2">
    <div class="flex gap-2 flex-wrap">
      <button class="tab-btn rounded-xl border border-white/10 px-3 py-2 text-sm font-medium" data-tab="plans" aria-selected="true">Buy Premium Plans</button>
      <button class="tab-btn rounded-xl border border-white/10 px-3 py-2 text-sm font-medium" data-tab="credits">Buy Credits</button>
      <button class="tab-btn rounded-xl border border-white/10 px-3 py-2 text-sm font-medium" data-tab="killer">Buy Killer Credits (kcoin)</button>
    </div>
    <!-- Tab: Plans -->
    <div id="tab-plans" class="mt-4">
      <div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-5">
                  <div class="relative rounded-2xl border border-white/10 bg-white/5 p-5 shadow-xl hover:shadow-2xl transition">
            <div class="absolute -top-3 -right-3 rounded-lg px-2 py-1 text-[11px] font-semibold bg-gradient-to-r from-fuchsia-500/30 to-violet-500/30 border border-white/10 text-fuchsia-200 shadow">
              Silver ü•à            </div>
            <div class="space-y-2">
              <div class="text-3xl font-extrabold tracking-tight">$10<span class="ml-1 text-xs font-medium text-slate-400">XCoin</span></div>
              <div class="text-sm text-slate-300">Credits: <span class="font-semibold">800</span></div>
              <div class="text-sm text-emerald-300">Bonus XCoin: <span class="font-semibold">+1</span></div>
              <div class="text-sm text-violet-300">Premium: <span class="font-semibold">7 days</span></div>
            </div>
            <div class="mt-4 flex items-center justify-between">
              <div class="text-xs text-slate-400">No payment methods. XCoin only.</div>
              <button
                data-type="plan"
                data-plan="silver"
                data-label="Silver ü•à"
                data-price="10"
                data-credits="800"
                data-bonus="1"
                data-days="7"
                class="buy-btn rounded-xl bg-emerald-600/90 hover:bg-emerald-600 px-3 py-2 text-sm font-semibold">
                Purchase
              </button>
            </div>
          </div>
                  <div class="relative rounded-2xl border border-white/10 bg-white/5 p-5 shadow-xl hover:shadow-2xl transition">
            <div class="absolute -top-3 -right-3 rounded-lg px-2 py-1 text-[11px] font-semibold bg-gradient-to-r from-fuchsia-500/30 to-violet-500/30 border border-white/10 text-fuchsia-200 shadow">
              Gold ü•á            </div>
            <div class="space-y-2">
              <div class="text-3xl font-extrabold tracking-tight">$20<span class="ml-1 text-xs font-medium text-slate-400">XCoin</span></div>
              <div class="text-sm text-slate-300">Credits: <span class="font-semibold">1,500</span></div>
              <div class="text-sm text-emerald-300">Bonus XCoin: <span class="font-semibold">+2</span></div>
              <div class="text-sm text-violet-300">Premium: <span class="font-semibold">15 days</span></div>
            </div>
            <div class="mt-4 flex items-center justify-between">
              <div class="text-xs text-slate-400">No payment methods. XCoin only.</div>
              <button
                data-type="plan"
                data-plan="gold"
                data-label="Gold ü•á"
                data-price="20"
                data-credits="1500"
                data-bonus="2"
                data-days="15"
                class="buy-btn rounded-xl bg-emerald-600/90 hover:bg-emerald-600 px-3 py-2 text-sm font-semibold">
                Purchase
              </button>
            </div>
          </div>
                  <div class="relative rounded-2xl border border-white/10 bg-white/5 p-5 shadow-xl hover:shadow-2xl transition">
            <div class="absolute -top-3 -right-3 rounded-lg px-2 py-1 text-[11px] font-semibold bg-gradient-to-r from-fuchsia-500/30 to-violet-500/30 border border-white/10 text-fuchsia-200 shadow">
              Platinum üèÖ            </div>
            <div class="space-y-2">
              <div class="text-3xl font-extrabold tracking-tight">$30<span class="ml-1 text-xs font-medium text-slate-400">XCoin</span></div>
              <div class="text-sm text-slate-300">Credits: <span class="font-semibold">3,000</span></div>
              <div class="text-sm text-emerald-300">Bonus XCoin: <span class="font-semibold">+3</span></div>
              <div class="text-sm text-violet-300">Premium: <span class="font-semibold">30 days</span></div>
            </div>
            <div class="mt-4 flex items-center justify-between">
              <div class="text-xs text-slate-400">No payment methods. XCoin only.</div>
              <button
                data-type="plan"
                data-plan="platinum"
                data-label="Platinum üèÖ"
                data-price="30"
                data-credits="3000"
                data-bonus="3"
                data-days="30"
                class="buy-btn rounded-xl bg-emerald-600/90 hover:bg-emerald-600 px-3 py-2 text-sm font-semibold">
                Purchase
              </button>
            </div>
          </div>
                  <div class="relative rounded-2xl border border-white/10 bg-white/5 p-5 shadow-xl hover:shadow-2xl transition">
            <div class="absolute -top-3 -right-3 rounded-lg px-2 py-1 text-[11px] font-semibold bg-gradient-to-r from-fuchsia-500/30 to-violet-500/30 border border-white/10 text-fuchsia-200 shadow">
              Diamond üíé            </div>
            <div class="space-y-2">
              <div class="text-3xl font-extrabold tracking-tight">$70<span class="ml-1 text-xs font-medium text-slate-400">XCoin</span></div>
              <div class="text-sm text-slate-300">Credits: <span class="font-semibold">10,000</span></div>
              <div class="text-sm text-emerald-300">Bonus XCoin: <span class="font-semibold">+5</span></div>
              <div class="text-sm text-violet-300">Premium: <span class="font-semibold">90 days</span></div>
            </div>
            <div class="mt-4 flex items-center justify-between">
              <div class="text-xs text-slate-400">No payment methods. XCoin only.</div>
              <button
                data-type="plan"
                data-plan="diamond"
                data-label="Diamond üíé"
                data-price="70"
                data-credits="10000"
                data-bonus="5"
                data-days="90"
                class="buy-btn rounded-xl bg-emerald-600/90 hover:bg-emerald-600 px-3 py-2 text-sm font-semibold">
                Purchase
              </button>
            </div>
          </div>
              </div>
    </div>
    <!-- Tab: Credits -->
    <div id="tab-credits" class="mt-4 hidden">
      <div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-5">
                  <div class="rounded-2xl border border-white/10 bg-white/5 p-5 shadow-xl hover:shadow-2xl transition">
            <div class="text-3xl font-extrabold tracking-tight">$1<span class="ml-1 text-xs font-medium text-slate-400">XCoin</span></div>
            <div class="mt-2 text-sm text-slate-300">You will get <b>100</b> credits.</div>
            <div class="text-sm text-violet-300">Validity: <span class="font-semibold">30 days</span></div>
            <div class="mt-4 flex items-center justify-between">
              <div class="text-xs text-slate-400">XCoin ‚Üí Credits (one-time)</div>
              <button
                data-type="credits"
                data-pack="c1"
                data-label="1 XCoin ‚Üí 100 credits"
                data-price="1"
                data-credits="100"
                data-days="30"
                class="buy-btn rounded-xl bg-emerald-600/90 hover:bg-emerald-600 px-3 py-2 text-sm font-semibold">
                Purchase
              </button>
            </div>
          </div>
                  <div class="rounded-2xl border border-white/10 bg-white/5 p-5 shadow-xl hover:shadow-2xl transition">
            <div class="text-3xl font-extrabold tracking-tight">$5<span class="ml-1 text-xs font-medium text-slate-400">XCoin</span></div>
            <div class="mt-2 text-sm text-slate-300">You will get <b>600</b> credits.</div>
            <div class="text-sm text-violet-300">Validity: <span class="font-semibold">30 days</span></div>
            <div class="mt-4 flex items-center justify-between">
              <div class="text-xs text-slate-400">XCoin ‚Üí Credits (one-time)</div>
              <button
                data-type="credits"
                data-pack="c5"
                data-label="5 XCoin ‚Üí 600 credits"
                data-price="5"
                data-credits="600"
                data-days="30"
                class="buy-btn rounded-xl bg-emerald-600/90 hover:bg-emerald-600 px-3 py-2 text-sm font-semibold">
                Purchase
              </button>
            </div>
          </div>
                  <div class="rounded-2xl border border-white/10 bg-white/5 p-5 shadow-xl hover:shadow-2xl transition">
            <div class="text-3xl font-extrabold tracking-tight">$10<span class="ml-1 text-xs font-medium text-slate-400">XCoin</span></div>
            <div class="mt-2 text-sm text-slate-300">You will get <b>1,300</b> credits.</div>
            <div class="text-sm text-violet-300">Validity: <span class="font-semibold">30 days</span></div>
            <div class="mt-4 flex items-center justify-between">
              <div class="text-xs text-slate-400">XCoin ‚Üí Credits (one-time)</div>
              <button
                data-type="credits"
                data-pack="c10"
                data-label="10 XCoin ‚Üí 1300 credits"
                data-price="10"
                data-credits="1300"
                data-days="30"
                class="buy-btn rounded-xl bg-emerald-600/90 hover:bg-emerald-600 px-3 py-2 text-sm font-semibold">
                Purchase
              </button>
            </div>
          </div>
                  <div class="rounded-2xl border border-white/10 bg-white/5 p-5 shadow-xl hover:shadow-2xl transition">
            <div class="text-3xl font-extrabold tracking-tight">$15<span class="ml-1 text-xs font-medium text-slate-400">XCoin</span></div>
            <div class="mt-2 text-sm text-slate-300">You will get <b>2,000</b> credits.</div>
            <div class="text-sm text-violet-300">Validity: <span class="font-semibold">30 days</span></div>
            <div class="mt-4 flex items-center justify-between">
              <div class="text-xs text-slate-400">XCoin ‚Üí Credits (one-time)</div>
              <button
                data-type="credits"
                data-pack="c15"
                data-label="15 XCoin ‚Üí 2000 credits"
                data-price="15"
                data-credits="2000"
                data-days="30"
                class="buy-btn rounded-xl bg-emerald-600/90 hover:bg-emerald-600 px-3 py-2 text-sm font-semibold">
                Purchase
              </button>
            </div>
          </div>
                  <div class="rounded-2xl border border-white/10 bg-white/5 p-5 shadow-xl hover:shadow-2xl transition">
            <div class="text-3xl font-extrabold tracking-tight">$30<span class="ml-1 text-xs font-medium text-slate-400">XCoin</span></div>
            <div class="mt-2 text-sm text-slate-300">You will get <b>4,000</b> credits.</div>
            <div class="text-sm text-violet-300">Validity: <span class="font-semibold">30 days</span></div>
            <div class="mt-4 flex items-center justify-between">
              <div class="text-xs text-slate-400">XCoin ‚Üí Credits (one-time)</div>
              <button
                data-type="credits"
                data-pack="c30"
                data-label="30 XCoin ‚Üí 4000 credits"
                data-price="30"
                data-credits="4000"
                data-days="30"
                class="buy-btn rounded-xl bg-emerald-600/90 hover:bg-emerald-600 px-3 py-2 text-sm font-semibold">
                Purchase
              </button>
            </div>
          </div>
                  <div class="rounded-2xl border border-white/10 bg-white/5 p-5 shadow-xl hover:shadow-2xl transition">
            <div class="text-3xl font-extrabold tracking-tight">$50<span class="ml-1 text-xs font-medium text-slate-400">XCoin</span></div>
            <div class="mt-2 text-sm text-slate-300">You will get <b>7,000</b> credits.</div>
            <div class="text-sm text-violet-300">Validity: <span class="font-semibold">30 days</span></div>
            <div class="mt-4 flex items-center justify-between">
              <div class="text-xs text-slate-400">XCoin ‚Üí Credits (one-time)</div>
              <button
                data-type="credits"
                data-pack="c50"
                data-label="50 XCoin ‚Üí 7000 credits"
                data-price="50"
                data-credits="7000"
                data-days="30"
                class="buy-btn rounded-xl bg-emerald-600/90 hover:bg-emerald-600 px-3 py-2 text-sm font-semibold">
                Purchase
              </button>
            </div>
          </div>
              </div>
    </div>
    <!-- Tab: Killer Credits -->
    <div id="tab-killer" class="mt-4 hidden">
      <div class="grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-5">
                  <div class="rounded-2xl border border-white/10 bg-white/5 p-5 shadow-xl hover:shadow-2xl transition">
            <div class="text-3xl font-extrabold tracking-tight">$1<span class="ml-1 text-xs font-medium text-slate-400">XCoin</span></div>
            <div class="mt-2 text-sm text-slate-300">You will get <b>50</b> kcoin.</div>
            <div class="text-sm text-violet-300">Validity: <span class="font-semibold">1 days</span></div>
            <div class="mt-4 flex items-center justify-between">
              <div class="text-xs text-slate-400">XCoin ‚Üí Killer Credits (one-time)</div>
              <button
                data-type="kcoin"
                data-pack="k1"
                data-label="1 XCoin ‚Üí 50 kcoin"
                data-price="1"
                data-kcoin="50"
                data-days="1"
                class="buy-btn rounded-xl bg-emerald-600/90 hover:bg-emerald-600 px-3 py-2 text-sm font-semibold">
                Purchase
              </button>
            </div>
          </div>
                  <div class="rounded-2xl border border-white/10 bg-white/5 p-5 shadow-xl hover:shadow-2xl transition">
            <div class="text-3xl font-extrabold tracking-tight">$5<span class="ml-1 text-xs font-medium text-slate-400">XCoin</span></div>
            <div class="mt-2 text-sm text-slate-300">You will get <b>300</b> kcoin.</div>
            <div class="text-sm text-violet-300">Validity: <span class="font-semibold">4 days</span></div>
            <div class="mt-4 flex items-center justify-between">
              <div class="text-xs text-slate-400">XCoin ‚Üí Killer Credits (one-time)</div>
              <button
                data-type="kcoin"
                data-pack="k5"
                data-label="5 XCoin ‚Üí 300 kcoin"
                data-price="5"
                data-kcoin="300"
                data-days="4"
                class="buy-btn rounded-xl bg-emerald-600/90 hover:bg-emerald-600 px-3 py-2 text-sm font-semibold">
                Purchase
              </button>
            </div>
          </div>
                  <div class="rounded-2xl border border-white/10 bg-white/5 p-5 shadow-xl hover:shadow-2xl transition">
            <div class="text-3xl font-extrabold tracking-tight">$10<span class="ml-1 text-xs font-medium text-slate-400">XCoin</span></div>
            <div class="mt-2 text-sm text-slate-300">You will get <b>650</b> kcoin.</div>
            <div class="text-sm text-violet-300">Validity: <span class="font-semibold">7 days</span></div>
            <div class="mt-4 flex items-center justify-between">
              <div class="text-xs text-slate-400">XCoin ‚Üí Killer Credits (one-time)</div>
              <button
                data-type="kcoin"
                data-pack="k10"
                data-label="10 XCoin ‚Üí 650 kcoin"
                data-price="10"
                data-kcoin="650"
                data-days="7"
                class="buy-btn rounded-xl bg-emerald-600/90 hover:bg-emerald-600 px-3 py-2 text-sm font-semibold">
                Purchase
              </button>
            </div>
          </div>
                  <div class="rounded-2xl border border-white/10 bg-white/5 p-5 shadow-xl hover:shadow-2xl transition">
            <div class="text-3xl font-extrabold tracking-tight">$15<span class="ml-1 text-xs font-medium text-slate-400">XCoin</span></div>
            <div class="mt-2 text-sm text-slate-300">You will get <b>1,000</b> kcoin.</div>
            <div class="text-sm text-violet-300">Validity: <span class="font-semibold">10 days</span></div>
            <div class="mt-4 flex items-center justify-between">
              <div class="text-xs text-slate-400">XCoin ‚Üí Killer Credits (one-time)</div>
              <button
                data-type="kcoin"
                data-pack="k15"
                data-label="15 XCoin ‚Üí 1000 kcoin"
                data-price="15"
                data-kcoin="1000"
                data-days="10"
                class="buy-btn rounded-xl bg-emerald-600/90 hover:bg-emerald-600 px-3 py-2 text-sm font-semibold">
                Purchase
              </button>
            </div>
          </div>
                  <div class="rounded-2xl border border-white/10 bg-white/5 p-5 shadow-xl hover:shadow-2xl transition">
            <div class="text-3xl font-extrabold tracking-tight">$30<span class="ml-1 text-xs font-medium text-slate-400">XCoin</span></div>
            <div class="mt-2 text-sm text-slate-300">You will get <b>2,000</b> kcoin.</div>
            <div class="text-sm text-violet-300">Validity: <span class="font-semibold">15 days</span></div>
            <div class="mt-4 flex items-center justify-between">
              <div class="text-xs text-slate-400">XCoin ‚Üí Killer Credits (one-time)</div>
              <button
                data-type="kcoin"
                data-pack="k30"
                data-label="30 XCoin ‚Üí 2000 kcoin"
                data-price="30"
                data-kcoin="2000"
                data-days="15"
                class="buy-btn rounded-xl bg-emerald-600/90 hover:bg-emerald-600 px-3 py-2 text-sm font-semibold">
                Purchase
              </button>
            </div>
          </div>
                  <div class="rounded-2xl border border-white/10 bg-white/5 p-5 shadow-xl hover:shadow-2xl transition">
            <div class="text-3xl font-extrabold tracking-tight">$50<span class="ml-1 text-xs font-medium text-slate-400">XCoin</span></div>
            <div class="mt-2 text-sm text-slate-300">You will get <b>3,500</b> kcoin.</div>
            <div class="text-sm text-violet-300">Validity: <span class="font-semibold">30 days</span></div>
            <div class="mt-4 flex items-center justify-between">
              <div class="text-xs text-slate-400">XCoin ‚Üí Killer Credits (one-time)</div>
              <button
                data-type="kcoin"
                data-pack="k50"
                data-label="50 XCoin ‚Üí 3500 kcoin"
                data-price="50"
                data-kcoin="3500"
                data-days="30"
                class="buy-btn rounded-xl bg-emerald-600/90 hover:bg-emerald-600 px-3 py-2 text-sm font-semibold">
                Purchase
              </button>
            </div>
          </div>
              </div>
    </div>
  </div>
  <div class="text-xs text-slate-500">
    All purchases are final (non-refundable).
  </div>
</div>
<!-- Reusable Modal (Confirm / Result) -->
<div id="cxModal" class="fixed inset-0 z-[100] hidden">
  <div class="absolute inset-0 bg-black/60 backdrop-blur-sm"></div>
  <div class="relative mx-auto max-w-md w-[92%] sm:w-[28rem] mt-[12vh]">
    <div class="rounded-2xl border border-white/10 bg-slate-900 text-slate-100 shadow-2xl overflow-hidden">
      <div id="cxModalHeader" class="px-5 py-4 border-b border-white/10 flex items-center justify-between">
        <div class="flex items-center gap-2">
          <div id="cxModalIcon" class="w-8 h-8 grid place-items-center rounded-lg bg-white/10">
            <!-- icon inject -->
          </div>
          <h3 id="cxModalTitle" class="text-base font-semibold">Confirm</h3>
        </div>
        <button id="cxModalClose" class="p-2 rounded-lg hover:bg-white/10" aria-label="Close modal">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor"><path d="M18.3 5.71 12 12.01l-6.29-6.3-1.42 1.42L10.59 13.4l-6.3 6.29 1.42 1.42L12 14.83l6.29 6.29 1.42-1.42-6.3-6.29 6.3-6.29z"/></svg>
        </button>
      </div>
      <div id="cxModalBody" class="px-5 py-4 text-sm">
        <!-- content inject -->
      </div>
      <div id="cxModalFooter" class="px-5 py-4 border-t border-white/10 flex items-center justify-end gap-2">
        <!-- buttons inject -->
      </div>
    </div>
  </div>
</div>
<!-- Success sound -->
<audio id="buySuccessSound" src="/assets/sounds/charge.mp3" preload="auto"></audio>
<script>
(() => {
  const $ = s=>document.querySelector(s), $$=s=>Array.from(document.querySelectorAll(s));
  const nf=n=>new Intl.NumberFormat().format(n|0);
  const msgBox=$("#buyMsg"), xBox=$("#buyXcoin"), cBox=$("#buyCredits"), kBox=$("#buyKcoin");
  const isMobile = () => window.matchMedia('(max-width: 768px)').matches;
  /* ---------- Tabs ---------- */
  const tabs = $$(".tab-btn");
  const views = { plans: "#tab-plans", credits: "#tab-credits", killer: "#tab-killer" };
  tabs.forEach(btn=>{
    const name = btn.dataset.tab;
    if(!name) return;
    btn.addEventListener('click', () => {
      tabs.forEach(b=>b.setAttribute('aria-selected','false'));
      btn.setAttribute('aria-selected','true');
      Object.values(views).forEach(sel=>{ const el=$(sel); if(el) el.classList.add('hidden'); });
      $(views[name])?.classList.remove('hidden');
    });
  });
  /* ---------- Modal helpers ---------- */
  const modal = $("#cxModal");
  const mTitle = $("#cxModalTitle");
  const mIconBox = $("#cxModalIcon");
  const mBody = $("#cxModalBody");
  const mFooter = $("#cxModalFooter");
  const closeBtn = $("#cxModalClose");
  const buySound = document.getElementById('buySuccessSound');
  function openModal({title, iconSVG, bodyHTML, buttonsHTML, tone='info'}){
    mTitle.textContent = title || 'Message';
    mIconBox.innerHTML = iconSVG || '';
    mBody.innerHTML = bodyHTML || '';
    mFooter.innerHTML = buttonsHTML || '';
    mIconBox.className = 'w-8 h-8 grid place-items-center rounded-lg ' + (
      tone==='success' ? 'bg-emerald-500/20 text-emerald-300' :
      tone==='error' ? 'bg-rose-500/20 text-rose-300' :
      tone==='warn' ? 'bg-amber-500/20 text-amber-300' : 'bg-white/10 text-slate-200'
    );
    modal.classList.remove('hidden');
    modal.style.opacity = 0;
    requestAnimationFrame(()=>{ modal.style.transition='opacity .15s ease-out'; modal.style.opacity = 1; });
  }
  function closeModal(){ modal.style.opacity = 0; setTimeout(()=>{ modal.classList.add('hidden'); }, 150); }
  closeBtn.addEventListener('click', closeModal);
  modal.addEventListener('click', (e)=>{ if(e.target === modal) closeModal(); });
/* ---------- Desktop banner (kept), Mobile modal ---------- */
function showMsg(type, html){
  if (isMobile()) {
    const icon = type==='ok'
      ? '<svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M9 16.2l-3.5-3.5L4 14.2l5 5 11-11-1.5-1.5z"/></svg>'
      : '<svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M11 15h2v2h-2zm0-8h2v6h-2zM1 21h22L12 2 1 21z"/></svg>';

    openModal({
      title: type==='ok' ? 'Success' : 'Failed',
      iconSVG: icon,
      bodyHTML: `<div class="text-sm leading-6">${html}</div>`,
      buttonsHTML: `<button class="px-4 py-2 rounded-lg bg-slate-800 hover:bg-slate-700" id="mOk">OK</button>`,
      tone: type==='ok' ? 'success' : 'error'
    });
    document.getElementById('mOk')?.addEventListener('click', closeModal);
    return; // ‚úÖ ‡¶Æ‡ßã‡¶¨‡¶æ‡¶á‡¶≤‡ßá ‡¶∂‡ßÅ‡¶ß‡ßÅ ‡¶Æ‡¶°‡¶æ‡¶≤‡¶á ‡¶¶‡ßá‡¶ñ‡¶æ‡¶¨‡ßá
  }

  // Desktop banner
  msgBox.classList.remove('hidden');
  msgBox.className = 'rounded-2xl border px-4 py-3 text-sm ' + (
    type==='ok'
      ? 'border-emerald-500/30 bg-emerald-500/10 text-emerald-200'
      : 'border-rose-500/30 bg-rose-500/10 text-rose-200'
  );
  msgBox.innerHTML = html;
}
  /* ---------- Confirm before purchase ---------- */
  function confirmPurchase(info, onYes){
    const icon = '<svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M11 15h2v2h-2zm0-8h2v6h-2zM1 21h22L12 2 1 21z"/></svg>';
    const rows = [];
    if(info.type==='plan'){
      rows.push(`<div>Price</div><div class="text-right"><b>$${info.price} XCoin</b></div>`);
      rows.push(`<div>Credits</div><div class="text-right"><b>${nf(info.credits)}</b></div>`);
      rows.push(`<div>Bonus</div><div class="text-right"><b>+${nf(info.bonus)} XCoin</b></div>`);
      rows.push(`<div>Premium</div><div class="text-right"><b>${info.days} days</b></div>`);
    } else if(info.type==='credits'){
      rows.push(`<div>Price</div><div class="text-right"><b>$${info.price} XCoin</b></div>`);
      rows.push(`<div>Credits</div><div class="text-right"><b>${nf(info.credits)}</b></div>`);
      rows.push(`<div>Validity</div><div class="text-right"><b>${info.days} days</b></div>`);
    } else if(info.type==='kcoin'){
      rows.push(`<div>Price</div><div class="text-right"><b>$${info.price} XCoin</b></div>`);
      rows.push(`<div>Killer Credits</div><div class="text-right"><b>${nf(info.kcoin)}</b></div>`);
      rows.push(`<div>Validity</div><div class="text-right"><b>${info.days} days</b></div>`);
    }
    openModal({
      title: 'Confirm Purchase', iconSVG: icon,
      bodyHTML: `<div class="text-sm space-y-2"><div>You're about to buy: <b>${info.label}</b></div><div class="grid grid-cols-2 gap-y-1 text-slate-300">${rows.join('')}</div></div>`,
      buttonsHTML: `<button id="mCancel" class="px-4 py-2 rounded-lg bg-slate-800 hover:bg-slate-700">Cancel</button><button id="mYes" class="px-4 py-2 rounded-lg bg-emerald-600 hover:bg-emerald-500 font-semibold">Yes, Purchase</button>`,
      tone: 'warn'
    });
    $("#mCancel")?.addEventListener('click', closeModal);
    $("#mYes")?.addEventListener('click', async () => {
      const yesBtn = $("#mYes"); yesBtn.disabled = true; yesBtn.textContent = 'Processing‚Ä¶';
      await onYes(info, yesBtn);
    });
  }
  /* ---------- API call ---------- */
  async function callBuy(info){
    const body = new URLSearchParams();
    if(info.type==='plan'){
      body.set('plan', info.plan);
    } else if(info.type==='credits'){
      body.set('action','credits');
      body.set('pack', info.pack);
    } else if(info.type==='kcoin'){
      body.set('action','kcoin');
      body.set('pack', info.pack);
    }
    const r = await fetch('/api/buy_plan.php', { method:'POST', credentials:'same-origin', headers:{'Content-Type':'application/x-www-form-urlencoded'}, body: body.toString() });
    return await r.json();
  }
  async function runPurchase(info, yesBtnEl){
    try{
      const j = await callBuy(info);
      if(!j.ok){
        const map = { NO_PLAN:'Invalid plan.', INSUFFICIENT:'Not enough XCoin.', SERVER:'Server error.', NO_PACK:'Invalid pack.', UNSUPPORTED:'Unavailable.' };
        showMsg('err', map[j.error]||'Failed.');
        return;
      }
    // success UI
    try { const s = document.getElementById('buySuccessSound'); if (s){ s.currentTime=0; await s.play(); } } catch(_){}
    
    const d = j.data || {};
    const receiptHTML = d.receipt_id
      ? `<div class="mt-2 text-[11px] text-slate-400">Receipt: <code>${d.receipt_id}</code></div>`
      : '';
    
    const html = `
      <div class="flex items-start gap-3">
        <div class="mt-[2px] shrink-0 rounded-lg bg-emerald-500/20 border border-emerald-500/30 p-1.5">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M9 16.2l-3.5-3.5L4 14.2l5 5 11-11-1.5-1.5z"/></svg>
        </div>
        <div>
          <div class="font-semibold">Purchase successful!</div>
          <div class="text-xs mt-0.5">${d.summary || ''}</div>
          ${receiptHTML}
        </div>
      </div>
    `;
    
    showMsg('ok', html);
    // ‡¶®‡¶§‡ßÅ‡¶®‡¶ü‡¶æ ‡¶¶‡¶ø‡¶®:
    if (!isMobile()) {
      // ‡¶°‡ßá‡¶∏‡ßç‡¶ï‡¶ü‡¶™‡ßá ‡¶Ü‡¶Æ‡¶∞‡¶æ ‡¶¨‡ßç‡¶Ø‡¶æ‡¶®‡¶æ‡¶∞ ‡¶¶‡ßá‡¶ñ‡¶æ‡¶á, ‡¶§‡¶æ‡¶á ‡¶ï‡¶®‡¶´‡¶æ‡¶∞‡ßç‡¶Æ ‡¶Æ‡¶°‡¶æ‡¶≤‡¶ü‡¶æ ‡¶¨‡¶®‡ßç‡¶ß ‡¶ï‡¶∞‡ßá ‡¶¶‡¶ø‡¶ö‡ßç‡¶õ‡¶ø
      closeModal();
    }
      // Update local counters
      if(typeof d.new_xcoin==='number' && xBox) xBox.textContent = '$'+nf(d.new_xcoin);
      if(typeof d.new_credits==='number' && cBox) cBox.textContent = nf(d.new_credits);
      if(typeof d.new_kcoin==='number' && kBox) kBox.textContent = nf(d.new_kcoin);
      // refresh header counters (if exists)
      try{
        const mr=await fetch('/api/me.php',{credentials:'same-origin'});
        const mj=await mr.json();
        if(mj?.ok){
          const map={meCredits:'credits',meCash:'cash',meLives:'lives',meCharges:'charges',meHits:'hits',meKcoin:'kcoin'};
          Object.entries(map).forEach(([id,k])=>{ const el=document.getElementById(id); if(el) el.textContent=(k==='cash'?'$':'')+nf(mj.data[k]); });
        }
      }catch(_){ }
    }catch(_){ showMsg('err','Network error.'); }
    finally{ if(yesBtnEl){ yesBtnEl.disabled=false; yesBtnEl.textContent='Yes, Purchase'; } }
  }
  /* ---------- Wire buttons ---------- */
  $$(".buy-btn").forEach(b=>{
    b.addEventListener('click',()=>{
      const info = { type: b.dataset.type };
      if(info.type==='plan'){
        info.plan = b.dataset.plan;
        info.label = b.dataset.label;
        info.price = Number(b.dataset.price||0);
        info.credits= Number(b.dataset.credits||0);
        info.bonus = Number(b.dataset.bonus||0);
        info.days = Number(b.dataset.days||0);
      } else if(info.type==='credits'){
        info.pack = b.dataset.pack;
        info.label = b.dataset.label;
        info.price = Number(b.dataset.price||0);
        info.credits= Number(b.dataset.credits||0);
        info.days = Number(b.dataset.days||0);
      } else if(info.type==='kcoin'){
        info.pack = b.dataset.pack;
        info.label = b.dataset.label;
        info.price = Number(b.dataset.price||0);
        info.kcoin = Number(b.dataset.kcoin||0);
        info.days = Number(b.dataset.days||0);
      } else {
        return; // unsupported
      }
      confirmPurchase(info, runPurchase);
    });
  });
})();
</script>
    </section>
  </main>

  <!-- RIGHT column -->
  <aside class="hidden xl:flex flex-col border-l border-white/10 bg-slate-900/60 sticky top-0 h-screen p-4 space-y-6 overflow-x-hidden">
    <!-- Online Users -->
    <div id="cardOnlineUsers" class="rounded-2xl bg-white/5 p-4 h-[45%]">
      <div class="flex items-center justify-between mb-2">
        <div class="text-slate-300 text-sm">Online Users</div>
        <div class="text-xs rounded-lg px-2 py-0.5 bg-emerald-500/15 text-emerald-300">
          Online Now: <span id="rightOnlineNow">20</span>
        </div>
      </div>
      <div id="rightOnlineList" class="no-scrollbar h-[calc(100%_-_1.75rem)] space-y-2 pr-1">
                  <div class="user-tile flex items-center gap-3">
            <div class="relative shrink-0">
              <img src="https://t.me/i/userpic/320/yn_qhiP3CplzAJ_3esYapiw0AcaSJ1UpJ8oUSgH3KR-I5WEweutrHwspzwHcaTmB.jpg" class="w-10 h-10 rounded-lg object-cover" alt=""
                   onerror="this.onerror=null;this.src='https://api.dicebear.com/7.x/shapes/svg?seed=DronzerX1'">
              <span class="absolute -bottom-0.5 -right-0.5 w-2.5 h-2.5 rounded-full bg-emerald-400 ring-2 ring-slate-900"></span>
            </div>
            <div class="min-w-0 flex-1">
              <div class="text-sm font-medium truncate">NOT | SHENN</div>
              <div class="text-xs text-slate-400 truncate">@DronzerX1</div>
            </div>
            <span class="inline-flex items-center rounded-md px-2 py-[2px] text-[10px] font-semibold bg-amber-500/15 text-amber-300">PREMIUM</span>          </div>
                  <div class="user-tile flex items-center gap-3">
            <div class="relative shrink-0">
              <img src="https://t.me/i/userpic/320/ZyPrMjxUdA57rNh37rg1cNct9Wie25p1dxOOouMjjIU.jpg" class="w-10 h-10 rounded-lg object-cover" alt=""
                   onerror="this.onerror=null;this.src='https://api.dicebear.com/7.x/shapes/svg?seed=R_O_B_1_N'">
              <span class="absolute -bottom-0.5 -right-0.5 w-2.5 h-2.5 rounded-full bg-emerald-400 ring-2 ring-slate-900"></span>
            </div>
            <div class="min-w-0 flex-1">
              <div class="text-sm font-medium truncate">‚±§‚ìÑŒ≤Œπùêç</div>
              <div class="text-xs text-slate-400 truncate">@R_O_B_1_N</div>
            </div>
            <span class="inline-flex items-center rounded-md px-2 py-[2px] text-[10px] font-semibold bg-slate-500/20 text-slate-300">FREE</span>          </div>
                  <div class="user-tile flex items-center gap-3">
            <div class="relative shrink-0">
              <img src="https://t.me/i/userpic/320/v5J5eqA-nM7jAMBoAxTNpZKHZJXIjnY3BP82fW4Mi6aXtHKZGrFVhFmyYaT5mkkK.jpg" class="w-10 h-10 rounded-lg object-cover" alt=""
                   onerror="this.onerror=null;this.src='https://api.dicebear.com/7.x/shapes/svg?seed=MD_TECH_HACKER'">
              <span class="absolute -bottom-0.5 -right-0.5 w-2.5 h-2.5 rounded-full bg-emerald-400 ring-2 ring-slate-900"></span>
            </div>
            <div class="min-w-0 flex-1">
              <div class="text-sm font-medium truncate">„Äé‚õ• ùó†ùóó ùóßùóòùóñùóõ ùóõùóîùóñùóûùóòùó• ‚õ•„Äè</div>
              <div class="text-xs text-slate-400 truncate">@MD_TECH_HACKER</div>
            </div>
            <span class="inline-flex items-center rounded-md px-2 py-[2px] text-[10px] font-semibold bg-slate-500/20 text-slate-300">FREE</span>          </div>
                  <div class="user-tile flex items-center gap-3">
            <div class="relative shrink-0">
              <img src="https://t.me/i/userpic/320/uqYGefkmoG8vpjlLCnXmK-w75QoG7ToZ7RlzK7jIQfnaCqOV_-akrVEm2aaW6C63.jpg" class="w-10 h-10 rounded-lg object-cover" alt=""
                   onerror="this.onerror=null;this.src='https://api.dicebear.com/7.x/shapes/svg?seed=dimemayyy'">
              <span class="absolute -bottom-0.5 -right-0.5 w-2.5 h-2.5 rounded-full bg-emerald-400 ring-2 ring-slate-900"></span>
            </div>
            <div class="min-w-0 flex-1">
              <div class="text-sm font-medium truncate">ùë®ùíèùíâ ùë¥ùíÇÃÄùíö ùë©ùíäùíÜÃÇÃÅùíï ùë™ùíâùíêÃõùíä</div>
              <div class="text-xs text-slate-400 truncate">@dimemayyy</div>
            </div>
            <span class="inline-flex items-center rounded-md px-2 py-[2px] text-[10px] font-semibold bg-slate-500/20 text-slate-300">FREE</span>          </div>
                  <div class="user-tile flex items-center gap-3">
            <div class="relative shrink-0">
              <img src="https://t.me/i/userpic/320/4j4Qq9Xw4ixSBCuR3n7i5_n6GlhPZNW0rIYpJIvKKW9gVtDVY6kWF0AY5m78jyar.jpg" class="w-10 h-10 rounded-lg object-cover" alt=""
                   onerror="this.onerror=null;this.src='https://api.dicebear.com/7.x/shapes/svg?seed=Larasskmti'">
              <span class="absolute -bottom-0.5 -right-0.5 w-2.5 h-2.5 rounded-full bg-emerald-400 ring-2 ring-slate-900"></span>
            </div>
            <div class="min-w-0 flex-1">
              <div class="text-sm font-medium truncate">ùöàùöäùöú</div>
              <div class="text-xs text-slate-400 truncate">@Larasskmti</div>
            </div>
            <span class="inline-flex items-center rounded-md px-2 py-[2px] text-[10px] font-semibold bg-amber-500/15 text-amber-300">PREMIUM</span>          </div>
                  <div class="user-tile flex items-center gap-3">
            <div class="relative shrink-0">
              <img src="https://t.me/i/userpic/320/XVw2FNu6aU6Ljg4XLAUCZoj8bZkqtLORQA05pcUTakaoLH77XyQR8fEYs4MsdRf2.jpg" class="w-10 h-10 rounded-lg object-cover" alt=""
                   onerror="this.onerror=null;this.src='https://api.dicebear.com/7.x/shapes/svg?seed=Imdevil6971'">
              <span class="absolute -bottom-0.5 -right-0.5 w-2.5 h-2.5 rounded-full bg-emerald-400 ring-2 ring-slate-900"></span>
            </div>
            <div class="min-w-0 flex-1">
              <div class="text-sm font-medium truncate">Devil_69</div>
              <div class="text-xs text-slate-400 truncate">@Imdevil6971</div>
            </div>
            <span class="inline-flex items-center rounded-md px-2 py-[2px] text-[10px] font-semibold bg-slate-500/20 text-slate-300">FREE</span>          </div>
                  <div class="user-tile flex items-center gap-3">
            <div class="relative shrink-0">
              <img src="https://t.me/i/userpic/320/REki0R1Xdg8512ERcJ1WqEOXyrOsFJ3C2HxPVTh1sWzVfWK9MZu6-JqCgEN106AP.jpg" class="w-10 h-10 rounded-lg object-cover" alt=""
                   onerror="this.onerror=null;this.src='https://api.dicebear.com/7.x/shapes/svg?seed=Gojosotoruz'">
              <span class="absolute -bottom-0.5 -right-0.5 w-2.5 h-2.5 rounded-full bg-emerald-400 ring-2 ring-slate-900"></span>
            </div>
            <div class="min-w-0 flex-1">
              <div class="text-sm font-medium truncate">Gojo Sotoru</div>
              <div class="text-xs text-slate-400 truncate">@Gojosotoruz</div>
            </div>
            <span class="inline-flex items-center rounded-md px-2 py-[2px] text-[10px] font-semibold bg-amber-500/15 text-amber-300">PREMIUM</span>          </div>
                  <div class="user-tile flex items-center gap-3">
            <div class="relative shrink-0">
              <img src="https://t.me/i/userpic/320/u_n4agAqA2mJPJirxOJJl2gkkbxRH9_lmm9lQh7obfqGA9meiGsitVdyl_BqgKrX.jpg" class="w-10 h-10 rounded-lg object-cover" alt=""
                   onerror="this.onerror=null;this.src='https://api.dicebear.com/7.x/shapes/svg?seed=atsupbolibard'">
              <span class="absolute -bottom-0.5 -right-0.5 w-2.5 h-2.5 rounded-full bg-emerald-400 ring-2 ring-slate-900"></span>
            </div>
            <div class="min-w-0 flex-1">
              <div class="text-sm font-medium truncate">Atsup Molimard</div>
              <div class="text-xs text-slate-400 truncate">@atsupbolibard</div>
            </div>
            <span class="inline-flex items-center rounded-md px-2 py-[2px] text-[10px] font-semibold bg-slate-500/20 text-slate-300">FREE</span>          </div>
                  <div class="user-tile flex items-center gap-3">
            <div class="relative shrink-0">
              <img src="https://t.me/i/userpic/320/iVZ2XBi5dgJ6qESEyAXdH7XUmK_0S6Lwty9wwmwBkiUElgMcFooP0BrzkubFIGAV.jpg" class="w-10 h-10 rounded-lg object-cover" alt=""
                   onerror="this.onerror=null;this.src='https://api.dicebear.com/7.x/shapes/svg?seed=landi1001'">
              <span class="absolute -bottom-0.5 -right-0.5 w-2.5 h-2.5 rounded-full bg-emerald-400 ring-2 ring-slate-900"></span>
            </div>
            <div class="min-w-0 flex-1">
              <div class="text-sm font-medium truncate">‚Ä¢ KURD ‚Ä¢</div>
              <div class="text-xs text-slate-400 truncate">@landi1001</div>
            </div>
            <span class="inline-flex items-center rounded-md px-2 py-[2px] text-[10px] font-semibold bg-amber-500/15 text-amber-300">PREMIUM</span>          </div>
                  <div class="user-tile flex items-center gap-3">
            <div class="relative shrink-0">
              <img src="https://t.me/i/userpic/320/Po4DPQrYE42HQvUb8dO7GJ-Z887Suhz02jmZprZhS61lLpfkQRl0-EPpQ4QgpslR.jpg" class="w-10 h-10 rounded-lg object-cover" alt=""
                   onerror="this.onerror=null;this.src='https://api.dicebear.com/7.x/shapes/svg?seed=znnxl'">
              <span class="absolute -bottom-0.5 -right-0.5 w-2.5 h-2.5 rounded-full bg-emerald-400 ring-2 ring-slate-900"></span>
            </div>
            <div class="min-w-0 flex-1">
              <div class="text-sm font-medium truncate">lmg</div>
              <div class="text-xs text-slate-400 truncate">@znnxl</div>
            </div>
            <span class="inline-flex items-center rounded-md px-2 py-[2px] text-[10px] font-semibold bg-slate-500/20 text-slate-300">FREE</span>          </div>
                  <div class="user-tile flex items-center gap-3">
            <div class="relative shrink-0">
              <img src="https://t.me/i/userpic/320/G0uAwatKaUrwt_31JgsybDQAy-MgbTOcTVQ3sYZdq-jkpCiuUi5b-dzL4MnHzBwT.jpg" class="w-10 h-10 rounded-lg object-cover" alt=""
                   onerror="this.onerror=null;this.src='https://api.dicebear.com/7.x/shapes/svg?seed=JAWAD0107'">
              <span class="absolute -bottom-0.5 -right-0.5 w-2.5 h-2.5 rounded-full bg-emerald-400 ring-2 ring-slate-900"></span>
            </div>
            <div class="min-w-0 flex-1">
              <div class="text-sm font-medium truncate">S N I P E R</div>
              <div class="text-xs text-slate-400 truncate">@JAWAD0107</div>
            </div>
            <span class="inline-flex items-center rounded-md px-2 py-[2px] text-[10px] font-semibold bg-amber-500/15 text-amber-300">PREMIUM</span>          </div>
                  <div class="user-tile flex items-center gap-3">
            <div class="relative shrink-0">
              <img src="https://t.me/i/userpic/320/4Zp8Hfp8zHjNIaK8EqBVXBuDLQLiJ6BQuoITyida8_OnewcuyRckWZz-VLpdE8ag.jpg" class="w-10 h-10 rounded-lg object-cover" alt=""
                   onerror="this.onerror=null;this.src='https://api.dicebear.com/7.x/shapes/svg?seed=Saiiid_777'">
              <span class="absolute -bottom-0.5 -right-0.5 w-2.5 h-2.5 rounded-full bg-emerald-400 ring-2 ring-slate-900"></span>
            </div>
            <div class="min-w-0 flex-1">
              <div class="text-sm font-medium truncate">ùíîùíÇùíäùíÖ ùíÇùíÉùíÜùíÖùíÜùíìùíìùíÇùíâùíéùíÇùíèùíÜ ñ†à</div>
              <div class="text-xs text-slate-400 truncate">@Saiiid_777</div>
            </div>
            <span class="inline-flex items-center rounded-md px-2 py-[2px] text-[10px] font-semibold bg-slate-500/20 text-slate-300">FREE</span>          </div>
                  <div class="user-tile flex items-center gap-3">
            <div class="relative shrink-0">
              <img src="https://t.me/i/userpic/320/NH2KWTwhybjV8tQ0Qv7ADnSvZZMHSsigq6H_BQevkQ8dWbJqNiYVVBREtkvNyXtQ.jpg" class="w-10 h-10 rounded-lg object-cover" alt=""
                   onerror="this.onerror=null;this.src='https://api.dicebear.com/7.x/shapes/svg?seed=GIODIDI123'">
              <span class="absolute -bottom-0.5 -right-0.5 w-2.5 h-2.5 rounded-full bg-emerald-400 ring-2 ring-slate-900"></span>
            </div>
            <div class="min-w-0 flex-1">
              <div class="text-sm font-medium truncate">Gio Didi</div>
              <div class="text-xs text-slate-400 truncate">@GIODIDI123</div>
            </div>
            <span class="inline-flex items-center rounded-md px-2 py-[2px] text-[10px] font-semibold bg-amber-500/15 text-amber-300">PREMIUM</span>          </div>
                  <div class="user-tile flex items-center gap-3">
            <div class="relative shrink-0">
              <img src="https://t.me/i/userpic/320/LaSjojl4iEx-OrRkGzZ8ApN7bFJZZocIePC8thDaOz1B8hdujUGLsgUjPSMj1s3q.jpg" class="w-10 h-10 rounded-lg object-cover" alt=""
                   onerror="this.onerror=null;this.src='https://api.dicebear.com/7.x/shapes/svg?seed=Aizenking11'">
              <span class="absolute -bottom-0.5 -right-0.5 w-2.5 h-2.5 rounded-full bg-emerald-400 ring-2 ring-slate-900"></span>
            </div>
            <div class="min-w-0 flex-1">
              <div class="text-sm font-medium truncate">! Aizen</div>
              <div class="text-xs text-slate-400 truncate">@Aizenking11</div>
            </div>
            <span class="inline-flex items-center rounded-md px-2 py-[2px] text-[10px] font-semibold bg-slate-500/20 text-slate-300">FREE</span>          </div>
                  <div class="user-tile flex items-center gap-3">
            <div class="relative shrink-0">
              <img src="https://t.me/i/userpic/320/bW1P_xLewnvWaVk7p3feKc1D3uxQJ1McPj2x5XHd1-H6R0H_LiKM-TO6u0QouzaZ.jpg" class="w-10 h-10 rounded-lg object-cover" alt=""
                   onerror="this.onerror=null;this.src='https://api.dicebear.com/7.x/shapes/svg?seed=iluvutu'">
              <span class="absolute -bottom-0.5 -right-0.5 w-2.5 h-2.5 rounded-full bg-emerald-400 ring-2 ring-slate-900"></span>
            </div>
            <div class="min-w-0 flex-1">
              <div class="text-sm font-medium truncate">iluvu</div>
              <div class="text-xs text-slate-400 truncate">@iluvutu</div>
            </div>
            <span class="inline-flex items-center rounded-md px-2 py-[2px] text-[10px] font-semibold bg-slate-500/20 text-slate-300">FREE</span>          </div>
                  <div class="user-tile flex items-center gap-3">
            <div class="relative shrink-0">
              <img src="https://t.me/i/userpic/320/8jgi6O6cHZIUregGJMPmdfAqlzDjkigvW9fjnr50VFoR6eZXV4OttbO9f26Dwecn.jpg" class="w-10 h-10 rounded-lg object-cover" alt=""
                   onerror="this.onerror=null;this.src='https://api.dicebear.com/7.x/shapes/svg?seed=Imposteronline'">
              <span class="absolute -bottom-0.5 -right-0.5 w-2.5 h-2.5 rounded-full bg-emerald-400 ring-2 ring-slate-900"></span>
            </div>
            <div class="min-w-0 flex-1">
              <div class="text-sm font-medium truncate">Goated</div>
              <div class="text-xs text-slate-400 truncate">@Imposteronline</div>
            </div>
            <span class="inline-flex items-center rounded-md px-2 py-[2px] text-[10px] font-semibold bg-amber-500/15 text-amber-300">PREMIUM</span>          </div>
                  <div class="user-tile flex items-center gap-3">
            <div class="relative shrink-0">
              <img src="https://t.me/i/userpic/320/PwmcLCrxz5mpDyteUeNJt6woChoAbUNRgMySdE5HutoLlE-4pAf2VtBPkE8Q24eI.jpg" class="w-10 h-10 rounded-lg object-cover" alt=""
                   onerror="this.onerror=null;this.src='https://api.dicebear.com/7.x/shapes/svg?seed=premkanan'">
              <span class="absolute -bottom-0.5 -right-0.5 w-2.5 h-2.5 rounded-full bg-emerald-400 ring-2 ring-slate-900"></span>
            </div>
            <div class="min-w-0 flex-1">
              <div class="text-sm font-medium truncate">DIGI PLUSüåæ üáßüá©</div>
              <div class="text-xs text-slate-400 truncate">@premkanan</div>
            </div>
            <span class="inline-flex items-center rounded-md px-2 py-[2px] text-[10px] font-semibold bg-amber-500/15 text-amber-300">PREMIUM</span>          </div>
                  <div class="user-tile flex items-center gap-3">
            <div class="relative shrink-0">
              <img src="https://t.me/i/userpic/320/aY5bLAZdOrxz9BEwgm1X0K5GaZMC_yQHofFHonPKbVJqtdF4kZfWqQ-gtTmlzn0c.jpg" class="w-10 h-10 rounded-lg object-cover" alt=""
                   onerror="this.onerror=null;this.src='https://api.dicebear.com/7.x/shapes/svg?seed=PRASHANT_GURJAR1'">
              <span class="absolute -bottom-0.5 -right-0.5 w-2.5 h-2.5 rounded-full bg-emerald-400 ring-2 ring-slate-900"></span>
            </div>
            <div class="min-w-0 flex-1">
              <div class="text-sm font-medium truncate">ùêèùêëùêÄùêíùêáùêÄùêçùêì ùêÜùêîùêëùêâùêÄùêë !!</div>
              <div class="text-xs text-slate-400 truncate">@PRASHANT_GURJAR1</div>
            </div>
            <span class="inline-flex items-center rounded-md px-2 py-[2px] text-[10px] font-semibold bg-slate-500/20 text-slate-300">FREE</span>          </div>
                  <div class="user-tile flex items-center gap-3">
            <div class="relative shrink-0">
              <img src="https://t.me/i/userpic/320/8sLpfmtaoChPKag6H5qGO8EgTkLxQpvNkwG6qHoBw1E.jpg" class="w-10 h-10 rounded-lg object-cover" alt=""
                   onerror="this.onerror=null;this.src='https://api.dicebear.com/7.x/shapes/svg?seed=AriaN4X'">
              <span class="absolute -bottom-0.5 -right-0.5 w-2.5 h-2.5 rounded-full bg-emerald-400 ring-2 ring-slate-900"></span>
            </div>
            <div class="min-w-0 flex-1">
              <div class="text-sm font-medium truncate">A4X</div>
              <div class="text-xs text-slate-400 truncate">@AriaN4X</div>
            </div>
            <span class="inline-flex items-center rounded-md px-2 py-[2px] text-[10px] font-semibold bg-amber-500/15 text-amber-300">PREMIUM</span>          </div>
                  <div class="user-tile flex items-center gap-3">
            <div class="relative shrink-0">
              <img src="https://t.me/i/userpic/320/keoRcVPzgVBLWad0RDhlLL6hDkwdEiBfdQmiZMOSvzKBtuMj4HfpuyjAmjn15KVi.jpg" class="w-10 h-10 rounded-lg object-cover" alt=""
                   onerror="this.onerror=null;this.src='https://api.dicebear.com/7.x/shapes/svg?seed=DarleneHowser'">
              <span class="absolute -bottom-0.5 -right-0.5 w-2.5 h-2.5 rounded-full bg-emerald-400 ring-2 ring-slate-900"></span>
            </div>
            <div class="min-w-0 flex-1">
              <div class="text-sm font-medium truncate">Darlene Howser</div>
              <div class="text-xs text-slate-400 truncate">@DarleneHowser</div>
            </div>
            <span class="inline-flex items-center rounded-md px-2 py-[2px] text-[10px] font-semibold bg-amber-500/15 text-amber-300">PREMIUM</span>          </div>
              </div>
    </div>

    <!-- Top Users -->
    <div id="cardTopUsers" class="rounded-2xl bg-white/5 p-4 h-[45%]">
      <div class="text-slate-300 text-sm mb-2">Top Users</div>
      <div id="rightTopList" class="no-scrollbar h-[calc(100%_-_1.5rem)] space-y-2 pr-1">
                  <div class="user-tile flex items-center gap-3">
            <div class="relative shrink-0">
              <img src="https://t.me/i/userpic/320/PwmcLCrxz5mpDyteUeNJt6woChoAbUNRgMySdE5HutoLlE-4pAf2VtBPkE8Q24eI.jpg" class="w-10 h-10 rounded-lg object-cover" alt=""
                   onerror="this.onerror=null;this.src='https://api.dicebear.com/7.x/shapes/svg?seed=premkanan'">
              <span class="absolute -bottom-0.5 -right-0.5 w-2.5 h-2.5 rounded-full bg-emerald-400 ring-2 ring-slate-900"></span>            </div>
            <div class="min-w-0 flex-1">
              <div class="flex items-center gap-2">
                <div class="text-sm font-medium truncate">DIGI PLUSüåæ üáßüá©</div>
                <span class="inline-flex items-center rounded-md px-2 py-[2px] text-[10px] font-semibold bg-amber-500/15 text-amber-300">PREMIUM</span>
              </div>
              <div class="text-xs text-slate-400 truncate">@premkanan</div>
            </div>
            <div class="text-xs rounded-md px-2 py-0.5 bg-violet-500/15 text-violet-300 font-medium">20,193 Hits</div>
          </div>
                  <div class="user-tile flex items-center gap-3">
            <div class="relative shrink-0">
              <img src="https://t.me/i/userpic/320/xaGpoEzua52vWqn8TOBSsfxtFTGUi12T0LmX-uIDL2CyT6KpOJVsV1zkn6QoHGNU.jpg" class="w-10 h-10 rounded-lg object-cover" alt=""
                   onerror="this.onerror=null;this.src='https://api.dicebear.com/7.x/shapes/svg?seed=Xonarch'">
                          </div>
            <div class="min-w-0 flex-1">
              <div class="flex items-center gap-2">
                <div class="text-sm font-medium truncate">X·¥ú·¥á ô·¥Ä¬∞</div>
                <span class="inline-flex items-center rounded-md px-2 py-[2px] text-[10px] font-semibold bg-amber-500/15 text-amber-300">PREMIUM</span>
              </div>
              <div class="text-xs text-slate-400 truncate">@Xonarch</div>
            </div>
            <div class="text-xs rounded-md px-2 py-0.5 bg-violet-500/15 text-violet-300 font-medium">18,306 Hits</div>
          </div>
                  <div class="user-tile flex items-center gap-3">
            <div class="relative shrink-0">
              <img src="https://t.me/i/userpic/320/c2R28khwxN8Fyj3smRVVhw3VfQ3OwYFuBHV4S1QWZhw.jpg" class="w-10 h-10 rounded-lg object-cover" alt=""
                   onerror="this.onerror=null;this.src='https://api.dicebear.com/7.x/shapes/svg?seed=w3ruw'">
                          </div>
            <div class="min-w-0 flex-1">
              <div class="flex items-center gap-2">
                <div class="text-sm font-medium truncate">iyan</div>
                <span class="inline-flex items-center rounded-md px-2 py-[2px] text-[10px] font-semibold bg-amber-500/15 text-amber-300">PREMIUM</span>
              </div>
              <div class="text-xs text-slate-400 truncate">@w3ruw</div>
            </div>
            <div class="text-xs rounded-md px-2 py-0.5 bg-violet-500/15 text-violet-300 font-medium">6,539 Hits</div>
          </div>
                  <div class="user-tile flex items-center gap-3">
            <div class="relative shrink-0">
              <img src="https://t.me/i/userpic/320/2_mT7ARXJrZM0iPHb7uot69u-TG9Zm_KNZzATSp_tMqj5xz3WqJmXdvJJIz1FuZE.jpg" class="w-10 h-10 rounded-lg object-cover" alt=""
                   onerror="this.onerror=null;this.src='https://api.dicebear.com/7.x/shapes/svg?seed=Caorselnf'">
                          </div>
            <div class="min-w-0 flex-1">
              <div class="flex items-center gap-2">
                <div class="text-sm font-medium truncate">Caoursel NF</div>
                <span class="inline-flex items-center rounded-md px-2 py-[2px] text-[10px] font-semibold bg-amber-500/15 text-amber-300">PREMIUM</span>
              </div>
              <div class="text-xs text-slate-400 truncate">@Caorselnf</div>
            </div>
            <div class="text-xs rounded-md px-2 py-0.5 bg-violet-500/15 text-violet-300 font-medium">5,213 Hits</div>
          </div>
                  <div class="user-tile flex items-center gap-3">
            <div class="relative shrink-0">
              <img src="https://t.me/i/userpic/320/cOaMPE8vJHoZ30yTOADQUHFfIVr0K3SknzOJiQHDSTc.jpg" class="w-10 h-10 rounded-lg object-cover" alt=""
                   onerror="this.onerror=null;this.src='https://api.dicebear.com/7.x/shapes/svg?seed=questcx'">
                          </div>
            <div class="min-w-0 flex-1">
              <div class="flex items-center gap-2">
                <div class="text-sm font-medium truncate">ùì†ùìæùìÆùìºùìΩ</div>
                <span class="inline-flex items-center rounded-md px-2 py-[2px] text-[10px] font-semibold bg-amber-500/15 text-amber-300">PREMIUM</span>
              </div>
              <div class="text-xs text-slate-400 truncate">@questcx</div>
            </div>
            <div class="text-xs rounded-md px-2 py-0.5 bg-violet-500/15 text-violet-300 font-medium">3,230 Hits</div>
          </div>
                  <div class="user-tile flex items-center gap-3">
            <div class="relative shrink-0">
              <img src="https://t.me/i/userpic/320/E228WR8ZQKvcTh4R0_P1tuof4DzINyxPCBRu25k0PZR3jIy_Wd5m5u441KXGvGLz.jpg" class="w-10 h-10 rounded-lg object-cover" alt=""
                   onerror="this.onerror=null;this.src='https://api.dicebear.com/7.x/shapes/svg?seed=NightAgent00'">
                          </div>
            <div class="min-w-0 flex-1">
              <div class="flex items-center gap-2">
                <div class="text-sm font-medium truncate">Night Agent‚ö°</div>
                <span class="inline-flex items-center rounded-md px-2 py-[2px] text-[10px] font-semibold bg-amber-500/15 text-amber-300">PREMIUM</span>
              </div>
              <div class="text-xs text-slate-400 truncate">@NightAgent00</div>
            </div>
            <div class="text-xs rounded-md px-2 py-0.5 bg-violet-500/15 text-violet-300 font-medium">3,204 Hits</div>
          </div>
                  <div class="user-tile flex items-center gap-3">
            <div class="relative shrink-0">
              <img src="https://t.me/i/userpic/320/wQTswE1iTn8d84Luv-GCl1ezPxgbDRGqHR6-aYVSyFo.jpg" class="w-10 h-10 rounded-lg object-cover" alt=""
                   onerror="this.onerror=null;this.src='https://api.dicebear.com/7.x/shapes/svg?seed=suggest_me_a_good_username'">
              <span class="absolute -bottom-0.5 -right-0.5 w-2.5 h-2.5 rounded-full bg-emerald-400 ring-2 ring-slate-900"></span>            </div>
            <div class="min-w-0 flex-1">
              <div class="flex items-center gap-2">
                <div class="text-sm font-medium truncate">Mr. Nobody</div>
                <span class="inline-flex items-center rounded-md px-2 py-[2px] text-[10px] font-semibold bg-amber-500/15 text-amber-300">PREMIUM</span>
              </div>
              <div class="text-xs text-slate-400 truncate">@suggest_me_a_good_username</div>
            </div>
            <div class="text-xs rounded-md px-2 py-0.5 bg-violet-500/15 text-violet-300 font-medium">2,859 Hits</div>
          </div>
                  <div class="user-tile flex items-center gap-3">
            <div class="relative shrink-0">
              <img src="https://t.me/i/userpic/320/xJrOqNb0zgE-xSYzYXiWODkxslVAUaOabLkh3FtXMk3xf1ZsDsdB24PJurvWBoTU.jpg" class="w-10 h-10 rounded-lg object-cover" alt=""
                   onerror="this.onerror=null;this.src='https://api.dicebear.com/7.x/shapes/svg?seed=MrxHamad'">
                          </div>
            <div class="min-w-0 flex-1">
              <div class="flex items-center gap-2">
                <div class="text-sm font-medium truncate">Ôº≠Ôº≤ Ôº®Ôº°Ôº≠Ôº°Ôº§</div>
                <span class="inline-flex items-center rounded-md px-2 py-[2px] text-[10px] font-semibold bg-slate-500/20 text-slate-300">FREE</span>
              </div>
              <div class="text-xs text-slate-400 truncate">@MrxHamad</div>
            </div>
            <div class="text-xs rounded-md px-2 py-0.5 bg-violet-500/15 text-violet-300 font-medium">2,817 Hits</div>
          </div>
                  <div class="user-tile flex items-center gap-3">
            <div class="relative shrink-0">
              <img src="https://t.me/i/userpic/320/IjstB34SUts1JbWPe8HBzOGMRiIz8CqllL8-uydmms4vU0h07H1ApueZPPDUwEUx.jpg" class="w-10 h-10 rounded-lg object-cover" alt=""
                   onerror="this.onerror=null;this.src='https://api.dicebear.com/7.x/shapes/svg?seed=Fb_ads_expert'">
                          </div>
            <div class="min-w-0 flex-1">
              <div class="flex items-center gap-2">
                <div class="text-sm font-medium truncate">Md Shamim Reza</div>
                <span class="inline-flex items-center rounded-md px-2 py-[2px] text-[10px] font-semibold bg-slate-500/20 text-slate-300">FREE</span>
              </div>
              <div class="text-xs text-slate-400 truncate">@Fb_ads_expert</div>
            </div>
            <div class="text-xs rounded-md px-2 py-0.5 bg-violet-500/15 text-violet-300 font-medium">2,474 Hits</div>
          </div>
                  <div class="user-tile flex items-center gap-3">
            <div class="relative shrink-0">
              <img src="https://t.me/i/userpic/320/mea3LI0BdEgXMUqUN0H8FpCz6hbdUObmsnx61SrxRDjpHW7wLEVIGMcvZ4ucH8-N.jpg" class="w-10 h-10 rounded-lg object-cover" alt=""
                   onerror="this.onerror=null;this.src='https://api.dicebear.com/7.x/shapes/svg?seed=ResearchLDT'">
                          </div>
            <div class="min-w-0 flex-1">
              <div class="flex items-center gap-2">
                <div class="text-sm font-medium truncate">Deep Black</div>
                <span class="inline-flex items-center rounded-md px-2 py-[2px] text-[10px] font-semibold bg-amber-500/15 text-amber-300">PREMIUM</span>
              </div>
              <div class="text-xs text-slate-400 truncate">@ResearchLDT</div>
            </div>
            <div class="text-xs rounded-md px-2 py-0.5 bg-violet-500/15 text-violet-300 font-medium">2,404 Hits</div>
          </div>
                  <div class="user-tile flex items-center gap-3">
            <div class="relative shrink-0">
              <img src="https://t.me/i/userpic/320/yn_qhiP3CplzAJ_3esYapiw0AcaSJ1UpJ8oUSgH3KR-I5WEweutrHwspzwHcaTmB.jpg" class="w-10 h-10 rounded-lg object-cover" alt=""
                   onerror="this.onerror=null;this.src='https://api.dicebear.com/7.x/shapes/svg?seed=DronzerX1'">
              <span class="absolute -bottom-0.5 -right-0.5 w-2.5 h-2.5 rounded-full bg-emerald-400 ring-2 ring-slate-900"></span>            </div>
            <div class="min-w-0 flex-1">
              <div class="flex items-center gap-2">
                <div class="text-sm font-medium truncate">NOT | SHENN</div>
                <span class="inline-flex items-center rounded-md px-2 py-[2px] text-[10px] font-semibold bg-amber-500/15 text-amber-300">PREMIUM</span>
              </div>
              <div class="text-xs text-slate-400 truncate">@DronzerX1</div>
            </div>
            <div class="text-xs rounded-md px-2 py-0.5 bg-violet-500/15 text-violet-300 font-medium">2,119 Hits</div>
          </div>
                  <div class="user-tile flex items-center gap-3">
            <div class="relative shrink-0">
              <img src="https://t.me/i/userpic/320/WKkHzHHZsBHgjkIaYr8BmLhsHQO8PuarxDMSRaynF2sse9mUwn0_RS0g99rhKEKB.jpg" class="w-10 h-10 rounded-lg object-cover" alt=""
                   onerror="this.onerror=null;this.src='https://api.dicebear.com/7.x/shapes/svg?seed=decimalji'">
                          </div>
            <div class="min-w-0 flex-1">
              <div class="flex items-center gap-2">
                <div class="text-sm font-medium truncate">COSMIC</div>
                <span class="inline-flex items-center rounded-md px-2 py-[2px] text-[10px] font-semibold bg-slate-500/20 text-slate-300">FREE</span>
              </div>
              <div class="text-xs text-slate-400 truncate">@decimalji</div>
            </div>
            <div class="text-xs rounded-md px-2 py-0.5 bg-violet-500/15 text-violet-300 font-medium">2,061 Hits</div>
          </div>
                  <div class="user-tile flex items-center gap-3">
            <div class="relative shrink-0">
              <img src="https://t.me/i/userpic/320/G0uAwatKaUrwt_31JgsybDQAy-MgbTOcTVQ3sYZdq-jkpCiuUi5b-dzL4MnHzBwT.jpg" class="w-10 h-10 rounded-lg object-cover" alt=""
                   onerror="this.onerror=null;this.src='https://api.dicebear.com/7.x/shapes/svg?seed=JAWAD0107'">
              <span class="absolute -bottom-0.5 -right-0.5 w-2.5 h-2.5 rounded-full bg-emerald-400 ring-2 ring-slate-900"></span>            </div>
            <div class="min-w-0 flex-1">
              <div class="flex items-center gap-2">
                <div class="text-sm font-medium truncate">S N I P E R</div>
                <span class="inline-flex items-center rounded-md px-2 py-[2px] text-[10px] font-semibold bg-amber-500/15 text-amber-300">PREMIUM</span>
              </div>
              <div class="text-xs text-slate-400 truncate">@JAWAD0107</div>
            </div>
            <div class="text-xs rounded-md px-2 py-0.5 bg-violet-500/15 text-violet-300 font-medium">2,030 Hits</div>
          </div>
                  <div class="user-tile flex items-center gap-3">
            <div class="relative shrink-0">
              <img src="https://t.me/i/userpic/320/RPPkqlsqUQxEA6RM_jNrx93bVcYmN3JtSbzgXFD8VQJdGhTARLN99zGIQK5iQZly.jpg" class="w-10 h-10 rounded-lg object-cover" alt=""
                   onerror="this.onerror=null;this.src='https://api.dicebear.com/7.x/shapes/svg?seed=An0nym0usphreaker'">
                          </div>
            <div class="min-w-0 flex-1">
              <div class="flex items-center gap-2">
                <div class="text-sm font-medium truncate">üî•An0nym0us phreaker ·¥¥·µÄ·¥π {SQL}</div>
                <span class="inline-flex items-center rounded-md px-2 py-[2px] text-[10px] font-semibold bg-slate-500/20 text-slate-300">FREE</span>
              </div>
              <div class="text-xs text-slate-400 truncate">@An0nym0usphreaker</div>
            </div>
            <div class="text-xs rounded-md px-2 py-0.5 bg-violet-500/15 text-violet-300 font-medium">1,978 Hits</div>
          </div>
                  <div class="user-tile flex items-center gap-3">
            <div class="relative shrink-0">
              <img src="https://t.me/i/userpic/320/j_iwYXmdegO9NeojaXA3qOl3MBV0v7TQ833gngI7SwxZIpmw2KzZJ2bxIBaDGfOo.jpg" class="w-10 h-10 rounded-lg object-cover" alt=""
                   onerror="this.onerror=null;this.src='https://api.dicebear.com/7.x/shapes/svg?seed=j_1_0'">
                          </div>
            <div class="min-w-0 flex-1">
              <div class="flex items-center gap-2">
                <div class="text-sm font-medium truncate">JIO</div>
                <span class="inline-flex items-center rounded-md px-2 py-[2px] text-[10px] font-semibold bg-amber-500/15 text-amber-300">PREMIUM</span>
              </div>
              <div class="text-xs text-slate-400 truncate">@j_1_0</div>
            </div>
            <div class="text-xs rounded-md px-2 py-0.5 bg-violet-500/15 text-violet-300 font-medium">1,957 Hits</div>
          </div>
                  <div class="user-tile flex items-center gap-3">
            <div class="relative shrink-0">
              <img src="https://t.me/i/userpic/320/IML9hoF25M4qOPxfbjtsjqZHXcfphJf5HO0dbOfOx1g.jpg" class="w-10 h-10 rounded-lg object-cover" alt=""
                   onerror="this.onerror=null;this.src='https://api.dicebear.com/7.x/shapes/svg?seed=drakennnnn_27'">
                          </div>
            <div class="min-w-0 flex-1">
              <div class="flex items-center gap-2">
                <div class="text-sm font-medium truncate">draven</div>
                <span class="inline-flex items-center rounded-md px-2 py-[2px] text-[10px] font-semibold bg-amber-500/15 text-amber-300">PREMIUM</span>
              </div>
              <div class="text-xs text-slate-400 truncate">@drakennnnn_27</div>
            </div>
            <div class="text-xs rounded-md px-2 py-0.5 bg-violet-500/15 text-violet-300 font-medium">1,917 Hits</div>
          </div>
                  <div class="user-tile flex items-center gap-3">
            <div class="relative shrink-0">
              <img src="https://t.me/i/userpic/320/q_HGJYrlyVU87xgSuALvBcrf8EW-geDPt8FsZ3QxT4g93Z9cXoqv0LSb_G4RtWxd.jpg" class="w-10 h-10 rounded-lg object-cover" alt=""
                   onerror="this.onerror=null;this.src='https://api.dicebear.com/7.x/shapes/svg?seed=azazelgen'">
                          </div>
            <div class="min-w-0 flex-1">
              <div class="flex items-center gap-2">
                <div class="text-sm font-medium truncate">Azazel ÔºßÔºßÔº£[·ö†]</div>
                <span class="inline-flex items-center rounded-md px-2 py-[2px] text-[10px] font-semibold bg-amber-500/15 text-amber-300">PREMIUM</span>
              </div>
              <div class="text-xs text-slate-400 truncate">@azazelgen</div>
            </div>
            <div class="text-xs rounded-md px-2 py-0.5 bg-violet-500/15 text-violet-300 font-medium">1,817 Hits</div>
          </div>
                  <div class="user-tile flex items-center gap-3">
            <div class="relative shrink-0">
              <img src="https://t.me/i/userpic/320/c08-dv71-VM9dOwZ4d2VSwgw4WYkWrVkuC5eaJkpdsD74X3NnmqgfRk0pcUCuixS.jpg" class="w-10 h-10 rounded-lg object-cover" alt=""
                   onerror="this.onerror=null;this.src='https://api.dicebear.com/7.x/shapes/svg?seed=CodeCracke'">
                          </div>
            <div class="min-w-0 flex-1">
              <div class="flex items-center gap-2">
                <div class="text-sm font-medium truncate">Atomic</div>
                <span class="inline-flex items-center rounded-md px-2 py-[2px] text-[10px] font-semibold bg-slate-500/20 text-slate-300">FREE</span>
              </div>
              <div class="text-xs text-slate-400 truncate">@CodeCracke</div>
            </div>
            <div class="text-xs rounded-md px-2 py-0.5 bg-violet-500/15 text-violet-300 font-medium">1,747 Hits</div>
          </div>
                  <div class="user-tile flex items-center gap-3">
            <div class="relative shrink-0">
              <img src="https://t.me/i/userpic/320/sZTP9X-hWPNKnpM7BtTDmc5IrQXMc7c1zbc04TNcmn2KWaE1vGh5zUohwUrqMbzo.jpg" class="w-10 h-10 rounded-lg object-cover" alt=""
                   onerror="this.onerror=null;this.src='https://api.dicebear.com/7.x/shapes/svg?seed=cendolive'">
                          </div>
            <div class="min-w-0 flex-1">
              <div class="flex items-center gap-2">
                <div class="text-sm font-medium truncate">DENNY.co</div>
                <span class="inline-flex items-center rounded-md px-2 py-[2px] text-[10px] font-semibold bg-slate-500/20 text-slate-300">FREE</span>
              </div>
              <div class="text-xs text-slate-400 truncate">@cendolive</div>
            </div>
            <div class="text-xs rounded-md px-2 py-0.5 bg-violet-500/15 text-violet-300 font-medium">1,726 Hits</div>
          </div>
                  <div class="user-tile flex items-center gap-3">
            <div class="relative shrink-0">
              <img src="https://t.me/i/userpic/320/EcwRYcc1GIUEoh0oTp7ZfTtXr7OnIZ-sxLkv8HULut1qzgNmO5R0tz-qhpEefDhF.jpg" class="w-10 h-10 rounded-lg object-cover" alt=""
                   onerror="this.onerror=null;this.src='https://api.dicebear.com/7.x/shapes/svg?seed=Lalapos30'">
                          </div>
            <div class="min-w-0 flex-1">
              <div class="flex items-center gap-2">
                <div class="text-sm font-medium truncate">Naouget !</div>
                <span class="inline-flex items-center rounded-md px-2 py-[2px] text-[10px] font-semibold bg-slate-500/20 text-slate-300">FREE</span>
              </div>
              <div class="text-xs text-slate-400 truncate">@Lalapos30</div>
            </div>
            <div class="text-xs rounded-md px-2 py-0.5 bg-violet-500/15 text-violet-300 font-medium">1,717 Hits</div>
          </div>
              </div>
    </div>
  </aside>
</div>

<!-- MODALS -->
<div id="topModal" class="fixed inset-0 z-50 hidden"><div class="absolute inset-0 bg-black/60"></div>
  <div class="absolute inset-x-4 md:inset-x-20 top-10 bottom-10 rounded-2xl bg-slate-900 border border-white/10 flex flex-col">
    <div class="flex items-center justify-between p-4 border-b border-white/10">
      <div class="font-semibold">Top Users</div>
      <button data-close="topModal" class="rounded-md bg-white/10 hover:bg-white/20 p-2" aria-label="Close">
        <!-- FIX: visible cross icon -->
        <svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M6 18L18 6M6 6l12 12" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </button>
    </div>
    <div class="p-4 flex-1 overflow-hidden">
      <div id="topModalList" class="no-scrollbar h-full space-y-2 pr-1"></div>
    </div>
  </div>
</div>

<div id="onlineModal" class="fixed inset-0 z-50 hidden"><div class="absolute inset-0 bg-black/60"></div>
  <div class="absolute inset-x-4 md:inset-x-20 top-10 bottom-10 rounded-2xl bg-slate-900 border border-white/10 flex flex-col">
    <div class="flex items-center justify-between p-4 border-b border-white/10">
      <div class="font-semibold">Online Users ‚Ä¢ <span id="modalOnlineNow">‚Äî</span></div>
      <button data-close="onlineModal" class="rounded-md bg-white/10 hover:bg-white/20 p-2" aria-label="Close">
        <!-- FIX: visible cross icon -->
        <svg class="w-4 h-4" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M6 18L18 6M6 6l12 12" stroke-linecap="round" stroke-linejoin="round"/>
        </svg>
      </button>
    </div>
    <div class="p-4 flex-1 overflow-hidden">
      <div id="onlineModalList" class="no-scrollbar h-full space-y-2 pr-1"></div>
    </div>
  </div>
</div>

<script>
(function(w, d){
  if (w.__CX_INIT__) return; w.__CX_INIT__ = true;
  const $ = sel => d.querySelector(sel);
  const nf = n => new Intl.NumberFormat().format(n|0);

  // Live clock
  const tickClock = () => { const el=$("#liveClock"); if(el) el.textContent=new Date().toLocaleTimeString(); };
  tickClock(); setInterval(tickClock, 1000);

  // Mobile sidebar open/close
  const mSide = $("#mSide");
  const mOverlay = $("#mOverlay");
  function openMenu(){ if(!mSide) return; mSide.classList.add('open'); if(mOverlay){ mOverlay.classList.remove('hidden'); mOverlay.classList.add('show','z-40'); } }
  function closeMenu(){ if(!mSide) return; mSide.classList.remove('open'); if(mOverlay){ mOverlay.classList.remove('show'); setTimeout(()=>mOverlay.classList.add('hidden'), 180); } }
  $("#dockMenu")?.addEventListener('click', () => { if (mSide?.classList.contains('open')) closeMenu(); else openMenu(); });
  mOverlay?.addEventListener('click', closeMenu);
  w.addEventListener('keydown', (e)=>{ if(e.key==='Escape') closeMenu(); });

  // Heartbeat
  const heartbeat = () => fetch('/api/heartbeat.php',{credentials:'same-origin'}).catch(()=>{});
  heartbeat(); setInterval(heartbeat, 30000);
  
  // guard so it doesn't attach twice
  if (!window.__CX_IDLE__) {
    window.__CX_IDLE__ = true;

    (function () {
      const LIMIT = 2880 * 60 * 1000; // 10 minutes
      let tm;

      function resetTimer() {
        clearTimeout(tm);
        tm = setTimeout(() => {
          // call server logout, then go to login with expired flag
          fetch('/logout.php?timeout=1', { credentials: 'include' })
            .finally(() => { location.href = '/?expired=1'; });
        }, LIMIT);
      }

      ['click','mousemove','keydown','scroll','touchstart','visibilitychange']
        .forEach(ev => document.addEventListener(ev, resetTimer, { passive:true }));

      resetTimer();
    })();
  }

  // Stats (if present)
  async function fetchStats() {
    try {
      const r = await fetch('/api/stats.php', {credentials:'same-origin'}); if (!r.ok) return;
      const j = await r.json(); if (!j.ok) return;
      const map = { gTotalUsers:'total_users', gLiveCards:'live_cards', gChargeCards:'charge_cards', gTotalHits:'total_hits' };
      Object.entries(map).forEach(([id,key])=>{ const el=d.getElementById(id); if (el) el.textContent = nf(j.data[key]); });
      const rightNow = d.getElementById('rightOnlineNow'); if (rightNow) rightNow.textContent = j.data.online_now;
    } catch(e){}
  }
  fetchStats(); setInterval(fetchStats, 10000);

  // Tiles builder
  function badge(status){
    status=(status||'').toLowerCase();
    const m={admin:['bg-rose-500/15','text-rose-300','ADMIN'],premium:['bg-amber-500/15','text-amber-300','PREMIUM'],banned:['bg-rose-500/15','text-rose-300','BANNED'],free:['bg-slate-500/20','text-slate-300','FREE']}[status]||['bg-slate-500/20','text-slate-300','FREE'];
    return `<span class="inline-flex items-center rounded-md px-2 py-[2px] text-[10px] font-semibold ${m[0]} ${m[1]}">${m[2]}</span>`;
  }
  function tileOnline(u){
    const img = u.profile ? u.profile : 'https://api.dicebear.com/7.x/shapes/svg?seed='+encodeURIComponent(u.username||'user');
    return `
      <div class="user-tile flex items-center gap-3">
        <div class="relative shrink-0">
          <img src="${img}" class="w-10 h-10 rounded-lg object-cover" alt="">
          <span class="absolute -bottom-0.5 -right-0.5 w-2.5 h-2.5 rounded-full ${u.is_online?'bg-emerald-400':'bg-slate-500'} ring-2 ring-slate-900"></span>
        </div>
        <div class="min-w-0 flex-1">
          <div class="text-sm font-medium truncate">${(u.full_name||u.username||'user')}</div>
          <div class="text-xs text-slate-400 truncate">@${(u.username||'user')}</div>
        </div>
        ${badge(u.status)}
      </div>`;
  }
  function tileTop(u){
    const img = u.profile ? u.profile : 'https://api.dicebear.com/7.x/shapes/svg?seed='+encodeURIComponent(u.username||'user');
    return `
      <div class="user-tile flex items-center gap-3">
        <div class="relative shrink-0">
          <img src="${img}" class="w-10 h-10 rounded-lg object-cover" alt="">
          ${u.is_online ? `<span class="absolute -bottom-0.5 -right-0.5 w-2.5 h-2.5 rounded-full bg-emerald-400 ring-2 ring-slate-900"></span>` : ``}
        </div>
        <div class="min-w-0 flex-1">
          <div class="flex items-center gap-2">
            <div class="text-sm font-medium truncate">${(u.full_name||u.username||'user')}</div>
            ${badge(u.status)}
          </div>
          <div class="text-xs text-slate-400 truncate">@${(u.username||'user')}</div>
        </div>
        <div class="text-xs rounded-md px-2 py-0.5 bg-violet-500/15 text-violet-300 font-medium">${nf(u.hits||0)} Hits</div>
      </div>`;
  }

  async function fetchUsers(scope, targetId) {
    try {
      const r = await fetch('/api/online_users.php?scope='+encodeURIComponent(scope)+'&limit=100', {credentials:'same-origin'});
      const j = await r.json(); if (!j.ok) return;
      if (scope==='online') { const els=[d.getElementById('rightOnlineNow'), d.getElementById('modalOnlineNow')]; els.forEach(el=>{ if(el) el.textContent = j.count ?? (j.users?.length||0); }); }
      const box = d.getElementById(targetId); if (!box) return;
      const arr = Array.isArray(j.users)? j.users : [];
      box.innerHTML = arr.map(u => scope==='top' ? tileTop(u) : tileOnline(u)).join('') ||
        `<div class="text-sm text-slate-500">${scope==='top'?'No data.':'No one online.'}</div>`;
    } catch(e){}
  }

  if (d.getElementById('rightOnlineList')) {
    fetchUsers('online','rightOnlineList'); fetchUsers('top','rightTopList');
    setInterval(()=>{ fetchUsers('online','rightOnlineList'); fetchUsers('top','rightTopList'); },15000);
  }

  // Modals (mobile)
  const topModal = d.getElementById('topModal');
  const onlineModal = d.getElementById('onlineModal');
  d.getElementById('dockTop')?.addEventListener('click', () => { topModal?.classList.remove('hidden'); fetchUsers('top','topModalList'); });
  d.getElementById('dockOnline')?.addEventListener('click', () => { onlineModal?.classList.remove('hidden'); fetchUsers('online','onlineModalList'); });
  d.querySelectorAll('[data-close]')?.forEach(btn => btn.addEventListener('click', () => d.getElementById(btn.dataset.close)?.classList.add('hidden')));
  [topModal, onlineModal].forEach(m => m?.addEventListener('click', (e) => { if (e.target === m.firstElementChild) m.classList.add('hidden'); }));
})(window, document);
</script>
</body>
</html>
